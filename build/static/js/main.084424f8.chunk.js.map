{"version":3,"sources":["components/layout/DropZone.js","helpers/ThemeliodiProblimata.js","helpers/computeZ.js","helpers/createWorld.js","helpers/CalculateDeltaPosition.js","components/layout/ColorPicker.js","actions/index.js","components/LayerPanel.js","components/ModelList.js","components/Background.js","components/Ground.js","components/layout/Slider.js","components/Images.js","components/Color.js","components/App.js","serviceWorker.js","reducers/index.js","index.js"],"names":["MyDropzone","props","onDrop","useCallback","acceptedFiles","useDropzone","getRootProps","getInputProps","isDragActive","useState","fileName","setFileName","className","onChange","e","console","log","target","files","Array","prototype","slice","call","map","file","name","join","href","ThemeliodesProblima_1","Xa","Ya","Sab","Gab","Xb","Math","sin","Yb","cos","calculateSab","absDX","abs","absDY","sqrt","pow","Number","toFixed","ThemeliodesProblima_2","DX","DY","theta","atan","posZ","positionX","positionY","dem","length","axeX","axeY","intX","floor","intY","restX","restY","axeZ","dXZ","ipotinousaX","restX_new","IpotinousaDiagwniou2","minIpotinousaX","slopeX","finalDXZ","heightX","dYZ","ipotinousaY","restY_new","IpotinousaDiagwniou1","minIpotinousaY","slopeY","finalDYZ","heightY","percent","FHeight1","FHeight2","createWorld","camera","controls","scene","renderer","pointer","partials","loaders","rendererContainer","mixer","setModelRuntimeInfo","showCoords","FBXLoader","GLTFLoader","clock","THREE","raycaster","mouse","host","document","getElementById","axesHost","AxesScene","background","antialias","alpha","setPixelRatio","window","devicePixelRatio","setClearColor","setSize","clientWidth","clientHeight","renderer2","appendChild","domElement","position","set","up","OrbitControls","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","PI","rotateSpeed","panSpeed","zoomSpeed","camera2","lookAt","controls2","enablePan","enableZoom","update","g","pos","getAttribute","pa","array","j","i","needsUpdate","computeVertexNormals","generateTerrain","geometry","material","color","side","flatShading","plane","castShadow","receiveShadow","add","gridHelper","rotateX","light","hemiLight","setHSL","groundColor","dirLight","multiplyScalar","shadowMapWidth","shadowMapHeight","d","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraFar","shadowBias","shadowDarkness","crossOrigin","opacity","transparent","alphaTest","sky","onWindowResize","aspect","updateProjectionMatrix","rotation","animate","requestAnimationFrame","delta","getDelta","mergin_mode","mixers","modelLayer","md","model","mesh","children","x","y","z","runtimeInfo","animating","activeRow","activeRowData","vectors","data","filter","v","id","vectorId","xStart","yStart","Za","posXY","newZ","CalculateDeltaPosition","newX","newY","newSab","Infinity","newActiveRow","axisZ","rotateOnWorldAxis","render","addEventListener","event","el","getBoundingClientRect","left","top","clientX","clientY","setFromCamera","intersects","intersectObject","face","normal","copy","point","posX","posY","load2","callback","scope","this","reader","FileReader","onload","readyState","status","parse","result","responseText","readAsArrayBuffer","ColorPicker","keys","state","clicked","style","backgroundColof","border","borderRadius","width","height","float","React","Component","defaultProps","loadModel","type","Date","now","setKeys","setPlane","changeSection","section","setLayers","layers","setModelLayer","layer","toggleLayer","visible","split","sublayer","backgroundColor","getObjectById","addModel","options","scale","vector","theVector","group","toLowerCase","includes","startAnimation","SkeletonUtils","clone","animations","push","rot","JSON","sca","axisX","axisY","traverse","node","isMesh","new_mesh","InstancedGroupMesh","transform","frustumCulled","random","randomXY","randomZ","updateMatrix","setMatrixAt","matrix","r","meshes","newLayers","skinnedMesh","animationName","clip","findByName","clipAction","play","checked","tree","key","title","loadGround","vecId","dispatch","getState","api","vec","index","positions","attributes","l","min","max","loader","load","texture","error","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","coords","connect","useEffect","onClick","setTimeout","stopPropagation","confirm","margin","showLine","checkable","multiple","checkStrictly","selectable","defaultExpandAll","checkedKeys","onSelect","selectedKeys","info","onCheck","splice","indexOf","treeData","models","mode","setMode","stringify","setPosition","setScale","setRotation","setVector","newPosition","newRotation","newScale","newMode","newVector","func","oldState","value","Fragment","size","selected","Slider","centerMode","centerSlidePercentage","emulateTouch","slides","slide","src","legend","setBackgroundColor","setGroundColor","setColor","hex","Modal","setAppElement","active","loadVector","setScene","setSky","diffX","diffY","innerHTML","loadDemo","url","then","newState","m","Promise","resolve","modelId","menuOpen","setMenuOpen","modalOpen","setModalOpen","demoLoaded","setDemoLoaded","loadingGear","setLoadingGear","setFiles","elements","setElements","toggleModal","toggleLoadingGear","b","loadGLTFModel","dracoLoader","DRACOLoader","setDRACOLoader","gltf","object","loadFBXModel","child","newWorld","f","theFiles","reject","extention","fetch","res","text","rows","a","icon","catch","all","evt","bstr","wb","XLSX","wsname","SheetNames","ws","Sheets","sheet_to_csv","header","n","readAsBinaryString","Navbar","expand","NavbarBrand","NavbarToggler","Collapse","isOpen","navbar","Nav","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","DropdownMenu","right","DropdownItem","divider","NavItem","NavLink","disabled","NavbarText","minSize","maxSize","defaultSize","Ground","visibility","class","onRequestClose","DropZone","Boolean","location","hostname","match","initialState","titles","combineReducers","action","Object","assign","rootElement","loggerMiddleware","createLogger","store","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","applyMiddleware","thunkMiddleware","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.084424f8.chunk.js","sourcesContent":["import React, {useCallback,useState} from 'react'\nimport {useDropzone} from 'react-dropzone'\n \nfunction MyDropzone(props) {\n  const onDrop = useCallback(acceptedFiles => {\n    // Do something with the files\n  }, [])\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\n  const onChange = (e) => {\n    console.log(e.target.files)\n    setFileName(Array.prototype.slice.call(e.target.files).map(file=>file.name).join(\", \") || \"\");\n    props.onChange(e)\n  }\n  const [fileName,setFileName] = useState(\"\");\n  return (\n    <div className=\"mm-dropzone\" {...getRootProps()} >\n      <input {...getInputProps()} onChange={onChange} />\n      {\n        isDragActive ?\n          <p>Drop the files here ...</p> :\n          <p>Drag 'n' drop some files here, or click to select files</p>\n      }\n      <p><a href=\"#\">{fileName}</a></p>\n    </div>\n  )\n}\nexport default MyDropzone;","export const ThemeliodesProblima_1 = (Xa,Ya,Sab,Gab) => {\n\t//1rad=63.6619772367581grads\n\tconst Xb = Xa + Sab*Math.sin(Gab/63.6619772367581);\n\tconst Yb = Ya + Sab*Math.cos(Gab/63.6619772367581);\n\treturn {Xb:Xb , Yb:Yb};\n}\nexport const calculateSab = (Xa,Ya,Xb,Yb) => {\n\tvar absDX = Math.abs(Xb-Xa);\n\tvar absDY = Math.abs(Yb-Ya);\n\tvar Sab = Math.sqrt( Math.pow(absDX,2) + Math.pow(absDY,2) );\n\treturn Number(Sab.toFixed(4));\n}\nexport const ThemeliodesProblima_2 = (Xa,Ya,Xb,Yb) => {\n\t\n\tvar absDX = Math.abs(Xb-Xa);\n\tvar absDY = Math.abs(Yb-Ya);\n\tvar Sab = Math.sqrt( Math.pow(absDX,2) + Math.pow(absDY,2) );\n\tvar DX = Xb-Xa;\n\tvar DY = Yb-Ya;\n\tvar theta =Math.atan((absDX/absDY))*63.6619772367581; //http://www.translatorscafe.com/cafe/EN/units-converter/angle/2-3/radian-grad/\n\tif (DX>0 && DY>0){\n\t\tvar Gab = theta;\n\t}\n\tif (DX>0 && DY<0){\n\t\tvar Gab = 200 - theta;\n\t}\n\tif (DX<0 && DY<0){\n\t\tvar Gab = 200 + theta;\n\t}\n\tif (DX<0 && DY>0){\n\t\tvar Gab = 400 - theta;\n\t}\n\tif (DX==0 && DY>0){\n\t\tvar Gab = 0;\n\t}\n\tif (DX==0 && DY<0){\n\t\tvar Gab = 200;\n\t}\n\tif (DX>0 && DY==0){\n\t\tvar Gab = 100;\n\t}\n\tif (DX<0 && DY==0){\n\t\tvar Gab = 300;\n\t}\n\tif (DX==0 && DY==0){\n\t\tvar Gab = 0;\n\t}\n\t//Gab = Gab/63.6619772367581;\n\treturn {Gab:Gab.toFixed(4) , Sab:Sab.toFixed(4)}\n}","import {calculateSab} from \"./ThemeliodiProblimata\";\nconst Xmin = -50;\nconst Ymin = -50;\nconst Xmax = 50;\nconst Ymax = 50;\nconst XZStep=100/99;\nconst YZStep=100/99;\nconst zScale = 150;\nconst zShift = 0;\nconst DemWidth = 100;\n\nexport const posZ=(positionX,positionY,dem) =>{\n\tif (dem.length == 0) {\n\t\treturn 0;\n\t}\n\tvar axeX=(calculateSab(0,positionX,0,Xmin)/XZStep).toFixed(4) - 0;\n\tvar axeY=(calculateSab(0,positionY,0,Ymax)/YZStep).toFixed(4) - 0;\n\tvar intX=Math.floor(axeX);\n\tvar intY=Math.floor(axeY);\n\tvar restX=axeX-intX;\n\tvar restY=axeY-intY;\n\t// var positionAtpoligon = (restX+restY)/2;\n\tif(restX == 0 && restY == 0){\n\t\tvar axeZ=((intY)*DemWidth)+intX;//calculate height\n\t\treturn Number(dem[axeZ][2].toFixed(4))\n\t}\n\tif (restX<=1-restY){\n\t//check X axis\n\n\t\tvar axeZ=((intY)*DemWidth)+intX;//calculate height\n\t\t// console.log(axeZ);\n\t\tif (!dem[axeZ] || !dem[axeZ + 1]) return 0;\n\t\tvar dXZ=dem[axeZ][2] - dem[axeZ+1][2];\n\t\tvar ipotinousaX= Math.sqrt(Math.pow((dXZ/zScale - zShift),2)+Math.pow(XZStep,2));\n\t\t//////\n\t\tvar restX_new=restX+restY;\n\t\tvar IpotinousaDiagwniou2=Math.sqrt(Math.pow(restY*YZStep,2)+Math.pow(restY*XZStep,2));\n\t\t//////\n\t\tvar minIpotinousaX = ipotinousaX*restX_new;\n\t\tvar slopeX = Math.atan( Math.abs((dXZ/zScale - zShift)/XZStep) );\n\t\t//var slopeX = Math.atan( (Math.abs(dXZ)/zScale - zShift)/XZStep) ;\n\t\tvar multX = Math.sin(slopeX);\n\t\t\n\t\tvar finalDXZ= minIpotinousaX*multX;\n\t\tif (dXZ<0){\n\t\t\tvar heightX = (dem[axeZ][2]/zScale - zShift)+finalDXZ;\n\t\t}\n\t\telse{\n\t\t\tvar heightX = (dem[axeZ][2]/zScale - zShift)-finalDXZ;\n\t\t}\n\t//check Y axis\n\t\t\n\t\tif (!dem[axeZ] || !dem[axeZ + DemWidth]) return 0;\n\t\tvar dYZ=(dem[axeZ][2] - dem[axeZ+DemWidth][2]);\n\t\tvar ipotinousaY= Math.sqrt(Math.pow((dYZ/zScale - zShift),2)+Math.pow(YZStep,2));\n\t\t//////\n\t\tvar restY_new=restY+restX;\n\t\tvar IpotinousaDiagwniou1=Math.sqrt(Math.pow(restX*XZStep,2)+Math.pow(restX*YZStep,2));\n\t\t//////\n\t\tvar minIpotinousaY = ipotinousaY*restY_new;\n\t\t\n\t\tvar slopeY = Math.atan( Math.abs((dYZ/zScale - zShift)/YZStep) );\n\t\t//var slopeY = Math.atan( Math.abs((dYZ/zScale - zShift)/YZStep) );\n\t\tvar multY = Math.sin(slopeY);\n\t\t\n\t\tvar finalDYZ = minIpotinousaY*multY;\n\t\tif (dYZ<0){\n\t\t\tvar heightY = (dem[axeZ][2]/zScale - zShift)+finalDYZ;\n\t\t}\n\t\telse{\n\t\t\tvar heightY = (dem[axeZ][2]/zScale - zShift)-finalDYZ;\n\t\t}\n\t\t\n\t\tvar percent=IpotinousaDiagwniou2/(IpotinousaDiagwniou1+IpotinousaDiagwniou2);\n\t\tvar FHeight1=Math.abs(heightX-heightY)*percent;\n\t\tif ((heightX-heightY)<0){\n\t\t\tvar FHeight2=heightX+FHeight1;\n\t\t}\n\t\telse{\n\t\t\tvar FHeight2=heightX-FHeight1;\n\t\t}\n\t}\n\telse{\n\t//check X axis\n\t\tvar axeZ=((intY+1)*DemWidth)+intX+1;//calculate height\n\t\t// console.log(axeZ)\n\t\tif (!dem[axeZ] || !dem[axeZ-1]) return 0;\n\t\tvar dXZ=(dem[axeZ][2] - dem[axeZ-1][2]);\n\t\tvar ipotinousaX= Math.sqrt(Math.pow((dXZ/zScale - zShift),2)+Math.pow(XZStep,2));\n\t\t//////\n\t\tvar restX_new=(1-restX)+(1-restY);\n\t\tvar IpotinousaDiagwniou2=Math.sqrt(Math.pow((1-restY)*YZStep,2)+Math.pow((1-restY)*XZStep,2));\n\t\t//////\n\t\tvar minIpotinousaX = ipotinousaX*(restX_new);\n\t\tvar slopeX = Math.atan( Math.abs((dXZ/zScale - zShift)/XZStep) );\n\t\t//var slopeX = Math.atan( (Math.abs(dXZ)/zScale - zShift)/XZStep) ;\n\t\tvar multX = Math.sin(slopeX);\n\t\tvar finalDXZ= minIpotinousaX*multX;\n\t\tif (dXZ<0){\n\t\t\tvar heightX = (dem[axeZ][2]/zScale - zShift)+finalDXZ;\n\t\t}\n\t\telse{\n\t\t\tvar heightX = (dem[axeZ][2]/zScale - zShift)-finalDXZ;\n\t\t}\n\t\t//check Y axis\n\t\tif (!dem[axeZ] || !dem[axeZ-DemWidth]) return 0;\n\t\tvar dYZ=(dem[axeZ][2] - dem[axeZ-DemWidth][2]);\n\t\tvar ipotinousaY= Math.sqrt(Math.pow((dYZ/zScale - zShift),2)+Math.pow(YZStep,2));\n\t\t//////\n\t\tvar restY_new=(1-restY)+(1-restX);\n\t\tvar IpotinousaDiagwniou1=Math.sqrt(Math.pow((1-restX)*XZStep,2)+Math.pow((1-restX)*YZStep,2));\n\t\t//////\n\t\tvar minIpotinousaY = ipotinousaY*(restY_new);\n\t\t\n\t\tvar slopeY = Math.atan( Math.abs((dYZ/zScale - zShift)/YZStep) );\n\t\t//var slopeY = Math.atan( Math.abs((dYZ/zScale - zShift)/YZStep) );\n\t\tvar multY = Math.sin(slopeY);\n\t\t\n\t\tvar finalDYZ= minIpotinousaY*multY;\n\t\tif (dYZ<0){\n\t\t\tvar heightY = (dem[axeZ][2]/zScale - zShift)+finalDYZ;\n\t\t}\n\t\telse{\n\t\t\tvar heightY = (dem[axeZ][2]/zScale - zShift)-finalDYZ;\n\t\t}\n\t\tvar percent=IpotinousaDiagwniou2/(IpotinousaDiagwniou1+IpotinousaDiagwniou2);\n\t\tvar FHeight1=Math.abs(heightX-heightY)*percent;\n\t\tif ((heightX-heightY)<0){\n\t\t\tvar FHeight2=heightX+FHeight1;\n\t\t}\n\t\telse{\n\t\t\tvar FHeight2=heightX-FHeight1;\n\t\t}\n\n\t}\n\t// console.log(FHeight2)\n\treturn Number(FHeight2.toFixed(4));\n}\n","import * as THREE from 'three';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport {CalculateDeltaPosition} from \"./CalculateDeltaPosition\";\nimport {calculateSab} from \"./ThemeliodiProblimata\";\n        // var modelName = \"models/gltf/\" + model.name + \".glb\";\n\nGLTFLoader.prototype.load2 = function(files, callback) {\n    var scope = this;\n    var file = files[0];\n\n    var reader = new FileReader();\n    \n    reader.onload = function(event) {\n        if (event.target.readyState === 2 || event.target.status === 0) {\n            scope.parse(event.target.result || event.target.responseText,\"\",callback);\n            // if (callback)\n            //     callback(gltf);\n\n        } else {\n\n            // scope.dispatchEvent({type: 'error', message: 'Couldn\\'t load URL [' + url + ']', response: event.target.readyState});\n\n        }\n    };\n    reader.readAsArrayBuffer(file);\n\n};\nFBXLoader.prototype.load2 = function(files, callback) {\n    var scope = this;\n    var file = files[0];\n\n    var reader = new FileReader();\n\n    reader.onload = function(event) {\n        if (event.target.readyState === 2 || event.target.status === 0) {\n            var geometry = scope.parse(event.target.result || event.target.responseText);\n\n            if (callback)\n                callback(geometry);\n\n        } else {\n\n            // scope.dispatchEvent({type: 'error', message: 'Couldn\\'t load URL [' + url + ']', response: event.target.readyState});\n\n        }\n    };\n\n    reader.readAsArrayBuffer(file);\n\n};\n\nexport default function\tcreateWorld(camera,controls,scene,renderer,pointer,partials,loaders,rendererContainer, mixer,setModelRuntimeInfo,showCoords) {\n      loaders.FBXLoader = FBXLoader;\n    \tloaders.GLTFLoader = GLTFLoader;\n    \tvar clock = new THREE.Clock();\n      var raycaster = new THREE.Raycaster();\n      var mouse = new THREE.Vector2();\n\n        const host = document.getElementById(\"three-map\");\n        const axesHost = document.getElementById(\"axes-helper\");\n      // init();\n      //render(); // remove when using next line for animation loop (requestAnimationFrame)\n\n        \n        const generateTerrain = (g /*,m, e*/) => {\n          const pos = g.getAttribute(\"position\");\n          const pa = pos.array;\n\n          // const hVerts = g.parameters.width;\n          // const wVerts = g.parameters.height;\n          // for (let j = 0; j < hVerts; j++) {\n          //   for (let i = 0; i < wVerts; i++) {\n          //     pa[3 * (j * wVerts + i) + 2] = 300\n              \n          //   }\n          // }\n          for (let j = 2,i=0; j < pa.length; j+=3,i++) {\n              pa[j] = 0;\n          }\n          pos.needsUpdate = true;\n          g.computeVertexNormals();\n        };\n\n\n        scene = new THREE.Scene();\n        const AxesScene = new THREE.Scene();\n        scene.background = new THREE.Color( 0x000000 );\n        // scene.fog = new THREE.FogExp2( 0xcccccc, 0.002 );\n        renderer = new THREE.WebGLRenderer( { antialias: true,alpha:true } );\n        renderer.setPixelRatio( window.devicePixelRatio );\n        renderer.setClearColor( 0x000000, 0 );\n        renderer.setSize( host.clientWidth, host.clientHeight );\n\n        const renderer2 = new THREE.WebGLRenderer( { antialias: true,alpha:true } );\n        renderer2.setPixelRatio( window.devicePixelRatio );\n        renderer2.setClearColor( 0x000000, 0 )\n        renderer2.setSize( axesHost.clientWidth, axesHost.clientHeight );\n\n\n        host.appendChild( renderer.domElement );\n        axesHost.appendChild( renderer2.domElement );\n        camera = new THREE.PerspectiveCamera( 60, host.clientWidth / host.clientHeight, 1, 10000 );\n        // camera = new THREE.OrthographicCamera( host.clientWidth/-2,host.clientWidth/2,host.clientHeight/2,host.clientHeight/-2, 1, 10000 );\n        camera.position.set( 80, 80, 80 );\n        camera.up.set(0,0,1);\n\n        // controls = new TrackballControls( camera, renderer.domElement );\n        controls = new OrbitControls( camera, renderer.domElement );\n        //controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)\n        controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n        controls.dampingFactor = 0.05;\n        controls.screenSpacePanning = false;\n        controls.minDistance = 1;\n        controls.maxDistance = 1000;\n        controls.maxPolarAngle = Math.PI / 2;\n        controls.rotateSpeed = 0.8;\n        controls.panSpeed = 0.8;\n        controls.zoomSpeed = 0.8;\n\n        \n\n        const camera2 = new THREE.PerspectiveCamera( 60, axesHost.clientWidth / axesHost.clientHeight, 1, 10000 );\n        // const camera2 = new THREE.OrthographicCamera( axesHost.clientWidth/-2,axesHost.clientWidth/2,axesHost.clientHeight/2,axesHost.clientHeight/-2, 1, 10000 );\n        // camera2.position.sub( camera.position,controls2.target );\n        camera2.position.set(6,6,6);\n        camera2.lookAt( AxesScene.position );\n\n        const controls2 = new OrbitControls( camera2, renderer.domElement );\n        //controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)\n        controls2.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n        controls2.dampingFactor = 0.05;\n        controls2.screenSpacePanning = false;\n        controls2.maxPolarAngle = Math.PI / 2;\n        controls2.enablePan = false;\n        controls2.enableZoom = false;\n        controls2.update();\n\n        // world\n        var geometry = new THREE.PlaneBufferGeometry( 100, 100, 99, 99 );\n\n        generateTerrain(geometry)        \n\n        var material = new THREE.MeshPhongMaterial( {color: \"#222\", side: THREE.DoubleSide} );\n\n        material.flatShading = true\n\n        const plane = new THREE.Mesh( geometry, material );\n        plane.position.set( 0, 0, 0 );\n\n        plane.castShadow = true;\n        plane.receiveShadow = true;\n\n        // var geometry = new THREE.SphereGeometry( 1, 32, 32 );\n        // var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );\n        // helper = new THREE.Mesh( geometry, material );\n        // scene.add( helper );\n\n        scene.add( plane );\n        \n        var gridHelper = new THREE.GridHelper( 10000, 1000 );\n        gridHelper.geometry.rotateX( Math.PI / 2 );\n        scene.add( gridHelper );\n\n        // var geometry = new THREE.CylinderBufferGeometry( 0, 10, 30, 4, 1 );\n        // var material = new THREE.MeshPhongMaterial( { color: 0xffffff, flatShading: true } );\n        // for ( var i = 0; i < 500; i ++ ) {\n        //   var mesh = new THREE.Mesh( geometry, material );\n        //   mesh.position.x = Math.random() * 1600 - 800;\n        //   mesh.position.y = 0;\n        //   mesh.position.z = Math.random() * 1600 - 800;\n        //   mesh.updateMatrix();\n        //   mesh.matrixAutoUpdate = false;\n        //   scene.add( mesh );\n        // }\n        // lights\n        // var light = new THREE.DirectionalLight( 0xffffff );\n        // light.position.set( 1, 1, 50 );\n        \n        // var light = new THREE.HemisphereLight( 0x0000ff, 0x00ff00, 0.6 ); \n        // scene.add( light );\n        // light.shadow = {\n        //   camera: {\n        //     near: 0.5,\n        //     far: 300,\n        //     left: -50,\n        //     bottom: -50,\n        //     right: 50,\n        //     top: 50\n        //   },\n        //   bias: 0.0001,\n        //   mapSize: { x: 1024 * 6, y: 1024 * 6 }\n        // };\n       \n        // var lhelper = new THREE.DirectionalLightHelper( light, 5 );\n        // scene.add( lhelper );\n\n        // var light = new THREE.AmbientLight( 0xffffff ); // soft white light\n        // scene.add( light );\n\n\n        var light = new THREE.AmbientLight( 0x404040,1 ); // soft white light\n        scene.add( light );\n\n\n         var hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 1 );\n            hemiLight.color.setHSL( 0.6,  0.5,0.75 );\n            hemiLight.groundColor.setHSL( 0.095, 0.5, 0.5 );\n            hemiLight.position.set( 0, 0,50 );\n            scene.add( hemiLight );\n\n            var dirLight = new THREE.DirectionalLight( 0xffffff, 1 );\n            window.dirLight = dirLight;\n            dirLight.position.set( 1,  -1, 1 );\n            dirLight.position.multiplyScalar( 50);\n            dirLight.name = \"dirlight\";\n            // dirLight.shadowCameraVisible = true;\n\n            scene.add( dirLight );\n\n            dirLight.castShadow = true;\n            dirLight.shadowMapWidth = dirLight.shadowMapHeight = 1024*2;\n\n            var d = 300;\n\n            dirLight.shadowCameraLeft = -d;\n            dirLight.shadowCameraRight = d;\n            dirLight.shadowCameraTop = d;\n            dirLight.shadowCameraBottom = -d;\n\n            dirLight.shadowCameraFar = 3500;\n            dirLight.shadowBias = -0.0001;\n            dirLight.shadowDarkness = 0.35;\n\n        // LIGHTS\n\n        // var hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );\n        // hemiLight.color.setHSL( 0.6,  0.6,1 );\n        // hemiLight.groundColor.setHSL( 0.095,  0.75,1 );\n        // hemiLight.position.set( 0,  0,50 );\n        // scene.add( hemiLight );\n\n        // var hemiLightHelper = new THREE.HemisphereLightHelper( hemiLight, 10 );\n        // scene.add( hemiLightHelper );\n\n        //\n\n        // var dirLight = new THREE.DirectionalLight( 0xffffff, 1 );\n        // dirLight.color.setHSL( 0.1, 0.95, 1 );\n        // dirLight.position.set( - 1, 1,1.75, );\n        // dirLight.position.multiplyScalar( 30 );\n        // scene.add( dirLight );\n\n        // dirLight.castShadow = true;\n\n        // dirLight.shadow.mapSize.width = 2048;\n        // dirLight.shadow.mapSize.height = 2048;\n\n        // var d = 50;\n\n        // dirLight.shadow.camera.left = - d;\n        // dirLight.shadow.camera.right = d;\n        // dirLight.shadow.camera.top = d;\n        // dirLight.shadow.camera.bottom = - d;\n\n        // dirLight.shadow.camera.far = 3500;\n        // dirLight.shadow.bias = - 0.0001;\n\n        // var dirLightHeper = new THREE.DirectionalLightHelper( dirLight, 10 );\n        // scene.add( dirLightHeper );\n        \n\n        // var axesHelper = new THREE.AxesHelper( 5 );\n        // AxesScene.add( axesHelper );\n        \n        // var light = new THREE.DirectionalLight( 0x002288 );\n        // light.position.set( - 0, - 0, - 100 );\n        // scene.add( light );\n\n\n        // var lhelper = new THREE.DirectionalLightHelper( light, 5 );\n        // scene.add( lhelper );        \n\n        // var light = new THREE.AmbientLight( 0x666666 );\n        // scene.add( light );\n\n\n        var geometry = new THREE.SphereGeometry( .5, 32, 32 );\n        var material = new THREE.MeshBasicMaterial( {color: \"red\"} );\n        pointer = new THREE.Mesh( geometry, material );\n        // scene.add( pointer );\n\n        var geometry = new THREE.SphereGeometry( 150, 32, 32 );\n        var loader = new THREE.TextureLoader();\n        loader.crossOrigin = \"\";\n        var geometry = new THREE.SphereGeometry( 150, 32, 32 );\n        var material = new THREE.MeshBasicMaterial({opacity: 0,\n          transparent: true,\n          alphaTest: 0.05,\n          side: THREE.DoubleSide\n        });\n        const sky = new THREE.Mesh( geometry, material );\n        sky.rotation.set(Math.PI/2,0,0)\n        scene.add(sky);\n\n        // loader.load(src,\n        //       function( texture ) {\n        //         sky.rotation.set(Math.PI/2,0,0)\n        //         sky.material = new THREE.MeshBasicMaterial( { map: texture, side: THREE.BackSide } );\n        //         sky.material.needsUpdate = true;\n        //         // props.scene.add(props.sky)  \n        //       },\n        //       function () {},  // onProgress function\n        //       function ( error ) { console.log( error ) } // onError function\n        //   );\n    \n\n        // var geometry = new THREE.SphereGeometry( 1, 32, 32 );\n        // var material = new THREE.MeshBasicMaterial( {color: 0xffffff} );\n        // var test = new THREE.Mesh( geometry, material );\n        // scene.add( test );\n\n        function onMouseMove( event ) {\n        // calculate mouse position in normalized device coordinates\n        // (-1 to +1) for both components\n        const el = document.getElementById(\"three-map\").getBoundingClientRect()\n        const left = el.left;\n        const top = el.top;\n        mouse.x = ( (event.clientX-left) / host.clientWidth ) * 2 - 1;\n        mouse.y = - ( (event.clientY - top) / host.clientHeight ) * 2 + 1;\n\n        raycaster.setFromCamera( mouse, camera );\n\n        // See if the ray from the camera into the world hits one of our meshes\n        var intersects = raycaster.intersectObject( plane );\n\n        // Toggle rotation bool for meshes that we clicked\n        if ( intersects.length > 0 ) {\n\n          pointer.position.set( 0, 0, 0 );\n          pointer.lookAt( intersects[ 0 ].face.normal );\n\n          pointer.position.copy( intersects[ 0 ].point );\n          const posX = Math.sqrt(Math.pow(-50 - -50,2) + Math.pow( pointer.position.x - -50,2) ) / 100;\n          const posY = Math.sqrt(Math.pow(-50 - -50,2) + Math.pow( -50 - pointer.position.y,2) ) / 100;\n          const posZ = Math.sqrt(Math.pow(0 - 0,2) + Math.pow( 0 - pointer.position.z,2) );\n          showCoords(posX,posY,posZ);\n          window.array = window.array || \"\";\n          window.array += `${pointer.position.x.toFixed(4)},${pointer.position.y.toFixed(4)},${pointer.position.z.toFixed(4)}\\n`\n        }\n\n\n      }\n      function onWindowResize() {\n        camera.aspect = host.clientWidth / host.clientHeight;\n        camera.updateProjectionMatrix();\n        camera2.updateProjectionMatrix();\n        renderer.setSize( host.clientWidth, host.clientHeight );\n      }\n\n      function animate() {\n        // setTimeout( function() {\n        requestAnimationFrame( animate );\n        // }, 1000 / 60 );\n        controls.update(); // only required if controls.enableDamping = true, or if controls.autoRotate = true\n        controls2.update(); // only required if controls.enableDamping = true, or if controls.autoRotate = true\n        render();\n      }\n\n      function render() {\n        var delta = clock.getDelta();\n\n        for ( var i = 0; i < window.mergin_mode.mixers.length; ++ i ) {\n\n          window.mergin_mode.mixers[ i ].update( delta );\n\n        }\n        window.mergin_mode.modelLayer.map(md => {\n          const model = {...md,mesh:md.mesh.children[0]};\n          const {x,y,z} = model.mesh.position;\n          const {animating,activeRow} = model.runtimeInfo;\n          const activeRowData = window.mergin_mode.vectors.data.filter(v=>v.id == model.vectorId)[0].array[0][activeRow];\n          const xStart = activeRowData[0];\n          const yStart = activeRowData[1];\n          const zStart = activeRowData[2];\n          const Gab = activeRowData[3];\n          const Sab = activeRowData[4];\n          if(\n            animating &&\n            typeof x !== \"undefined\" &&\n            typeof y !== \"undefined\" &&\n            typeof z !== \"undefined\"\n            ) {\n            const dem =window.mergin_mode.plane.dem;\n            const {x:newX,y:newY,z:newZ} = CalculateDeltaPosition(Number(x.toFixed(4)),Number(y.toFixed(4)),Number(z.toFixed(4)),Gab,delta,dem);\n            let newSab = calculateSab(xStart,yStart,x,y);\n            if(newSab === Infinity){\n              newSab = 0\n            }\n            if(newSab < Sab){\n              model.mesh.position.set(newX,newY,newZ);\n            } else {\n              const newActiveRow = window.mergin_mode.vectors.data.filter(v=>v.id == model.vectorId)[0].array[0][activeRow + 1];\n              if(!newActiveRow) {\n                  const startActiveRow = window.mergin_mode.vectors.data.filter(v=>v.id == model.vectorId)[0].array[0][0];\n\n                  // model.mesh.position.set(startActiveRow[0],startActiveRow[1],startActiveRow[2]);\n                  setModelRuntimeInfo(model.id,{animating:false,activeRow:0})\n              } else {\n                  // model.mesh.position.set(newActiveRow[0],newActiveRow[1],newActiveRow[2]);\n                  setModelRuntimeInfo(model.id,{animating:true,activeRow:activeRow + 1})\n                  // model.mesh.rotation.set(model.mesh.rotation.x,model.mesh.rotation.y,newActiveRow[3]/63.6619772367581)\n                  // model.mesh.rotation.y = (-newActiveRow[3] + 200)/63.6619772367581\n                  // const axisX = new Vector3(1, 0, 0);\n                  // const axisY = new Vector3(0, 1, 0);\n                  const axisZ = new THREE.Vector3(0, 0, 1);\n                  // mesh.rotateOnWorldAxis(axisX, rot.x);\n                  // mesh.rotateOnWorldAxis(axisY, rot.y);\n                  model.mesh.rotateOnWorldAxis(axisZ, - (400 - activeRowData[3] + newActiveRow[3])/63.6619772367581);\n              }\n            }\n            // console.log(model.mesh.position)\n            \n          }\n        })\n        renderer.render( scene, camera );\n        renderer2.render( AxesScene, camera2 );\n      }\n\n      animate();\n       \n      window.addEventListener( 'resize', onWindowResize, false );\n      document.getElementById(\"three-map\").addEventListener( 'click', onMouseMove, false );\n\n      partials = {plane,pointer,sky,gridHelper};\n      return {camera,controls,scene,renderer,pointer,partials,loaders,onWindowResize}\n} ","import {ThemeliodesProblima_1} from \"./ThemeliodiProblimata\";\nimport {posZ} from \"./computeZ\";\n\nexport const CalculateDeltaPosition = (Xa,Ya,Za,Gab,delta,dem) => {\n\tconst Sab = delta*1.75; //distance in meters per second (50km/h)\n\tlet posXY = ThemeliodesProblima_1(Xa,Ya,Sab,Gab);\n\tconst newZ =posZ(posXY.Xb,posXY.Yb,dem);\n \t// const DZ = posZ(posXY.Xb,posXY.Yb,dem)-Za;\n\t// const DZ = 0;\n\t// if(DZ<0 || DZ >0) {\n\t// \tconst slope = DZ/Sab;\n\t// \tconst slopeRadians = Math.atan(slope);\n\t// \tconst SabNew = Math.abs(Sab*Math.cos(slopeRadians));\n\t// \tposXY = ThemeliodesProblima_1(Xa,Ya,SabNew,Gab);\n\t// }\n\n\t// const PxPosition = UserCoordinatesXY(posXY.Xb,posXY.Yb);\n\t\n\treturn {x:posXY.Xb , y:posXY.Yb , z:newZ};\n}\n\nexport const CalculateDeltaRotation = (Xa,Ya,Za,Xb,Yb,Zb,Gab,Sab,rotX,rotY) => {\n\tvar DZ = Zb-Za;\n\tvar XYkathetis = ThemeliodesProblima_1(Xb,Yb,Sab,Gab+100);\n\tvar Xkathetis =XYkathetis.Xb;\n\tvar Ykathetis =XYkathetis.Yb;\n\tvar Zkathetis = posZ(Xkathetis,Ykathetis);\n\tvar DZkathetis = Zb-Zkathetis;\n\t\n\tvar RotationX = 0;\n\tvar RotationY =0;\n\t\n\tif(DZ<0 || DZ >0){\n\t\tRotationX = Math.atan(DZ/Sab) ;\n\t\tRotationY = Math.atan(DZkathetis/Sab) ;\n\t}\n\n\tvar DRotationX=rotX-RotationX;\n\tvar DRotationY=rotY-RotationY;\n\t\n\treturn {\n\t\tx:Number(DRotationX),\n\t\ty:Number(DRotationY)\n\t};\n}\n","/* eslint-disable jsx-a11y/no-noninteractive-element-interactions,\nno-alert, no-console, react/no-find-dom-node */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { SketchPicker } from 'react-color';\n\nclass ColorPicker extends React.Component {\n  static propTypes = {\n  };\n\n  static defaultProps = {\n  };\n\n  constructor(props) {\n    super(props);\n    const { keys } = props;\n    this.state = {\n      clicked: false,\n      color:\"#000\"\n    };\n\n  }\n\n  render() {\n    if(this.state.clicked) {\n      return <SketchPicker />\n    }\n    return <div style={{\n      backgroundColof:this.state.color,\n      border:\"3px solid whitesmoke\",\n      borderRadius:\"4px\",\n      width:\"16px\",\n      height:\"16px\",\n      float:\"right\"\n    }}></div>\n  }\n}\n\nexport default ColorPicker;","import * as THREE from 'three';\nimport { SkeletonUtils } from 'three/examples/jsm/utils/SkeletonUtils.js';\nimport InstancedGroupMesh from \"three-instanced-group-mesh\";\n\nexport const loadModel = model => ({\n  type: 'LOAD_MODEL',\n  model,\n  id:Date.now()\n});\n\nexport const loadVector = vector => ({\n  type: 'LOAD_VECTOR',\n  vector,\n  id:Date.now()\n})\n\nexport const setScene = scene => ({\n  type: 'SET_SCENE',\n  scene,\n  id:Date.now()\n})\n\nexport const setKeys = keys => ({\n  type: 'SET_KEYS',\n  keys,\n})\n\nexport const setPlane = plane => ({\n  type: 'SET_PLANE',\n  plane,\n  id:Date.now()\n})\nexport const setSky = sky => ({\n  type: 'SET_SKY',\n  sky,\n  id:Date.now()\n})\nexport const setBackgroundColor = color => ({\n  type: 'SET_BACKGROUND_COLOR',\n  color\n});\nexport const setGroundColor = color => ({\n  type: 'SET_GROUND_COLOR',\n  color\n});\n\nexport const changeSection = section => ({\n  type: 'CHANGE_SECTION',\n  section\n})\n\nexport const setLayers = layers => ({\n  type: 'SET_LAYERS',\n  layers\n})\n\nexport const setModelLayer = layer => ({\n  type: 'SET_MODEL_LAYER',\n  layer\n})\n\nexport const setModelRuntimeInfo = (modelId,info) => ({\n  type: 'SET_MODEL_RUNTIME_INFO',\n    modelId,\n  runtimeInfo:{\n    ...info\n  }\n})\n\nexport const toggleLayer = (data,visible) => {\n  // console.log(visible)\n  const layer = data.name.split(\"-\")[0]\n  const sublayer = data.name.split(\"-\")[1]\n  if(layer === \"background\"){\n   if (sublayer === \"color\") {\n    data.scene.background = visible ? new THREE.Color(  data.backgroundColor ) : null;\n   }\n   else if (sublayer === \"image\") {\n    data.sky.visible = visible;\n   }\n   else if (sublayer === \"video\") {}\n  } else if(layer === \"ground\"){\n    if(sublayer == \"grid\") {\n      data.gridHelper.visible = visible;\n\n    } else if(sublayer == \"color\") {\n      console.log(data)\n      data.plane.visible = visible;\n\n    }\n    // data.plane.visible = visible;\n    \n  }  else if(layer === \"models\"){\n    const object = data.scene.getObjectById( Number(sublayer), true );\n    object.visible = visible;    \n  } else if(layer === \"vectors\"){\n    \n  }\n}\n\nexport const showCoords = (x,y,z) => {\n  return (dispatch,getState) => {\n    const coords = getState().api.plane.coords;\n    // console.log(coords)\n    const diffX = coords.max.x - coords.min.x;\n    const diffY = coords.max.y - coords.min.y;\n    console.log(diffX, diffY)\n    document.getElementById(\"coords\").innerHTML = `${(x*diffX + coords.min.x).toFixed(2)}, ${(y*diffY + coords.min.y).toFixed(2)},${(coords.min.z + z).toFixed(2)}`;\n    // window.data.push(`${(x*100 - 50).toFixed(2)},${(y*100 - 50).toFixed(2)},${(0 + z).toFixed(2)}`);\n  \n  }\n}\n\nexport const addModel = (options, props)=> {\n  const {d, scale,rotation,vector} = options;\n    const theVector = props.vectors.filter(v=>{\n      return v.id == vector[d.id]\n    }\n    )[0];\n    if(!theVector) {\n      return false;\n    }\n\n    const group = new THREE.Group();\n    if (theVector.name.toLowerCase().includes(\"anime\")){\n      let mesh;\n      if(d.name.toLowerCase().includes(\"glb\") || d.name.toLowerCase().includes(\"gltf\")){\n        mesh = SkeletonUtils.clone( d.mesh.scene );\n        var mixer = startAnimation( mesh, d.mesh.animations, \"Walk\" );\n        window.mergin_mode.mixers.push(mixer)\n      } else {\n        mesh = d.mesh.clone();\n        var mixer = startAnimation( mesh.children[0], d.mesh.animations, \"Walk\" );\n        window.mergin_mode.mixers.push(mixer)\n\n      }\n      const rot = JSON.parse(rotation[d.id]);\n      rot.x = Number(rot.x);\n      rot.y = Number(rot.y);\n      rot.z = Number(rot.z);\n      const sca = JSON.parse(scale[d.id]);\n      sca.x = Number(sca.x);\n      sca.y = Number(sca.y);\n      sca.z = Number(sca.z);\n      // mesh.rotation.set(rot.x,rot.y,rot.z);\n      const axisX = new THREE.Vector3(1, 0, 0);\n      const axisY = new THREE.Vector3(0, 1, 0);\n      const axisZ = new THREE.Vector3(0, 0, 1);\n      mesh.rotateOnWorldAxis(axisX, rot.x);\n      mesh.rotateOnWorldAxis(axisY, rot.y);\n      // mesh.rotateOnWorldAxis(axisZ, rot.z);\n      mesh.rotateOnWorldAxis(axisZ, (-theVector.array[0][0][3] )/63.6619772367581);\n      // mesh.rotation.z = ((theVector.array[0][0][3])/63.6619772367581);\n\n      mesh.scale.set(sca.x,sca.y,sca.z);\n      mesh.position.set(...theVector.array[0][0]);\n       mesh.traverse(function (node){\n            if (node.isMesh) {\n              node.castShadow = true;\n              node.receiveShadow = true;\n            }})\n      group.add(mesh);\n      props.setModelLayer({\n        id:Date.now(),\n        vectorId:theVector.id,\n        runtimeInfo:{animating:true,activeRow:0},\n        mesh:group\n      });\n  } else {\n\n     let mesh;\n      if(d.name.toLowerCase().includes(\"glb\") || d.name.toLowerCase().includes(\"gltf\")){\n      mesh = SkeletonUtils.clone( d.mesh.scene );\n\n      } else {\n        mesh = d.mesh.clone();\n      }\n\n      if(theVector.array[0].length > 2) {\n        \n              let new_mesh = new InstancedGroupMesh( mesh, theVector.array[0].length);\n              // console.log(theVector.array[0].length)\n              for ( var i = 0; i < theVector.array[0].length - 1; i ++ ) {\n                var transform = new THREE.Object3D();\n                transform.frustumCulled = false;\n                const rot = JSON.parse(rotation[d.id]);\n                rot.x = Number(rot.x);\n                rot.y = Number(rot.y);\n                rot.z = Number(rot.z);\n                const axisX = new THREE.Vector3(1, 0, 0);\n                const axisY = new THREE.Vector3(0, 1, 0);\n                const axisZ = new THREE.Vector3(0, 0, 1);\n                transform.rotateOnWorldAxis(axisX, rot.x);\n                transform.rotateOnWorldAxis(axisY, rot.y);\n                transform.rotateOnWorldAxis(axisZ, Math.random()*2*Math.PI);\n\n                const randomXY = Math.random() * 0.1;\n                const randomZ = Math.random() * 0.1 + 0.05;\n                const sca = JSON.parse(scale[d.id]);\n                sca.x = Number(sca.x) + randomXY;\n                sca.y = Number(sca.y) + randomXY;\n                sca.z = Number(sca.z) + randomZ;\n                transform.scale.set(sca.x,sca.y,sca.z);\n                transform.position.set( ...theVector.array[0][i] );\n                transform.updateMatrix();\n\n                new_mesh.setMatrixAt( i, transform.matrix );\n\n            }\n            new_mesh.traverse(function (node){\n            if (node.isMesh) {\n              node.castShadow = true;\n              node.receiveShadow = true;\n            }})\n            group.add( new_mesh )\n      } else {\n\n        theVector.array[0].map(r=>{\n         if(r.length == 0) {return false;}\n         if(theVector.name.includes(\"new\")) {\n            mesh.traverse(function (node){\n            if (node.isMesh) {\n              node.material.transparent = true;\n              node.material.opacity = 1;\n              node.material.needsUpdate = true;\n              node.castShadow = true;\n              node.receiveShadow = true;\n            }})\n         } else {\n           // var modifier = new SimplifyModifier();\n            mesh.traverse(function (node){\n            if (node.isMesh) {\n              node.material.transparent = true;\n              node.material.opacity = 1;\n              node.material.needsUpdate = true;\n              node.castShadow = true;\n              node.receiveShadow = true;\n            }})\n         }\n          \n          // const pos = JSON.parse(position[d.id]);\n          // pos.x = Number(pos.x);\n          // pos.y = Number(pos.y);\n          // pos.z = Number(pos.z);\n          const rot = JSON.parse(rotation[d.id]);\n          rot.x = Number(rot.x);\n          rot.y = Number(rot.y);\n          rot.z = Number(rot.z);\n          const axisX = new THREE.Vector3(1, 0, 0);\n          const axisY = new THREE.Vector3(0, 1, 0);\n          const axisZ = new THREE.Vector3(0, 0, 1);\n          mesh.rotateOnWorldAxis(axisX, rot.x);\n          mesh.rotateOnWorldAxis(axisY, rot.y);\n          mesh.rotateOnWorldAxis(axisZ, rot.z);\n          // mesh.rotateOnWorldAxis(axisZ, ( )/63.6619772367581);\n\n          const sca = JSON.parse(scale[d.id]);\n          sca.x = Number(sca.x);\n          sca.y = Number(sca.y);\n          sca.z = Number(sca.z);\n          mesh.rotation.set(rot.x,rot.y,rot.z);\n\n          mesh.scale.set(sca.x,sca.y,sca.z);\n        \n          mesh.position.set(...r);\n          \n          // if(theVector.name.includes(\"loutro\")){\n          //   mesh.traverse(function (node){\n          //   if (node.isMesh) {\n          //     if(node.material.map && node.geometry.boundingBox){\n          //       node.material.map.wrapS = THREE.RepeatWrapping;\n          //       node.material.map.wrapT = THREE.RepeatWrapping;\n          //       const p1 = node.geometry.boundingBox.min;\n          //       const p2 = node.geometry.boundingBox.max;\n          //       const d = parseInt(Math.sqrt(Math.pow(p1.x - p2.x,2) + Math.pow(p1.y - p2.y,2) + Math.pow(p1.z - p2.z,2)));\n          //       node.material.map.repeat.set( d,d );\n          //     }\n          //   }})\n          // }\n          window.meshes = window.meshes || []\n          window.meshes.push (mesh);\n          window.mesh = mesh;\n          group.add(mesh)\n        });\n      }\n  }\n  const newLayers = {...props.layers};\n  newLayers.checked.push(`models-${group.id}`)\n  newLayers.tree[1].children[3].children.push({ key: `models-${group.id}`, title: d.name + \"_\" + theVector.name})\n  props.scene.add(group);\n  props.setLayers(newLayers);\n\n  function startAnimation( skinnedMesh, animations, animationName ) {\n\n        var mixer = new THREE.AnimationMixer( skinnedMesh );\n        var clip = THREE.AnimationClip.findByName( animations, animationName );\n\n        if ( clip ) {\n\n          var action = mixer.clipAction( clip );\n          action.play();\n\n        }\n\n        return mixer;\n\n      }\n}\n\nexport const loadDemo =  function(props,load){\n  return (dispatch, getState) => {\n    const urls = [\n      {name:\"loutro-old.glb\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/loutro-old.glb\"},\n      {name:\"tree-green.fbx\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/tree-green.fbx\"},\n      {name:\"tree-red.fbx\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/tree-red.fbx\"},\n      {name:\"loutro-new.gltf\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/loutro-new.gltf\"},\n      {name:\"man-walking.gltf\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/Soldier.glb\"},\n      {name:\"loutro-old.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/loutro-old.csv\"},\n      {name:\"loutro-new.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/loutro-new.csv\"},\n      {name:\"trees-green.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/trees-green.csv\"},\n      {name:\"trees-red.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/trees-red.csv\"},\n      {name:\"dtm.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/dtm.csv\"},\n      {name:\"anime-path-1.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/anime-path-1.csv\"},\n      {name:\"anime-path-2.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/anime-path-2.csv\"},\n      {name:\"anime-path-3.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/anime-path-3.csv\"},\n      {name:\"anime-path-4.csv\",size:\"0\",url:process.env.PUBLIC_URL + \"/demo/anime-path-4.csv\"},\n    ]\n\n    return load(urls).then(()=>{\n      //all loaded\n      const newState = getState();\n      let d, vector, rotation, scale;\n\n      //load trees green\n      d = newState.api.models.data.filter(m=>m.name === \"tree-green.fbx\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"trees-green.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:0.1,y:0.1,z:0.1})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      })\n\n      //load trees red\n      d = newState.api.models.data.filter(m=>m.name === \"tree-red.fbx\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"trees-red.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:0.1,y:0.1,z:0.1})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      })\n\n      //add sky\n      var loader = new THREE.TextureLoader();\n      loader.crossOrigin = \"\";\n      loader.load(\"../assets/fantasy.jpg\",\n            function( texture ) {\n              newState.api.sky.mesh.material = new THREE.MeshBasicMaterial( { map: texture, side: THREE.BackSide } );\n              newState.api.sky.mesh.material.needsUpdate = true;\n              // props.scene.add(props.sky)  \n            },\n            function () {},  // onProgress function\n            function ( error ) { console.log( error ) } // onError function\n        );\n      // add ground\n      props.loadGround(newState.api.vectors.data.filter(m=>m.name === \"dtm.csv\")[0].id,props)\n      \n      //load loutro old\n      d = newState.api.models.data.filter(m=>m.name === \"loutro-old.glb\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"loutro-old.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:1.1,y:1.1,z:1.1})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      })\n\n      //load loutro new\n      d = newState.api.models.data.filter(m=>m.name === \"loutro-new.gltf\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"loutro-new.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:11,y:11,z:11})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      })\n\n      //load man walking\n      d = newState.api.models.data.filter(m=>m.name === \"man-walking.gltf\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"anime-path-1.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:1,y:1,z:1})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      })\n\n      //load man walking\n      d = newState.api.models.data.filter(m=>m.name === \"man-walking.gltf\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"anime-path-2.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:1,y:1,z:1})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      });\n\n      //load man walking\n      d = newState.api.models.data.filter(m=>m.name === \"man-walking.gltf\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"anime-path-3.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:1,y:1,z:1})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      });\n\n      //load man walking\n      d = newState.api.models.data.filter(m=>m.name === \"man-walking.gltf\")[0];\n      vector = {[d.id]:newState.api.vectors.data.filter(m=>m.name === \"anime-path-4.csv\")[0].id};\n      rotation = {[d.id]:JSON.stringify({x:1.57,y:0,z:0})}\n      scale = {[d.id]:JSON.stringify({x:1,y:1,z:1})}\n      \n      props.addModel({d, scale,rotation,vector},{\n        ...props,\n        section:newState.api.section.active,\n        title:newState.api.section.title,\n        layers:newState.api.layers,\n        vectors: newState.api.vectors.data,\n        modelLayer:newState.api.modelLayer,\n        coords:newState.api.plane.coords,\n        state:newState.api,\n        scene:newState.api.scene\n      });\n      return Promise.resolve(true);\n    });\n  }\n}\nexport const loadGround = (vecId)=>{\n  return (dispatch,getState)=> {\n    const state = getState();\n    const props = {\n      vectors:state.api.vectors.data,\n      plane:state.api.plane.mesh,\n    }\n\n    let v = props.vectors.filter(vec => vec.id == vecId)[0]\n        if(!v) {return false;}\n        v = v.array[0];\n        var positions = props.plane.geometry.attributes.position.array;\n        var x, y, z, index;\n        x = y = z = index = 0;\n        let l = v.length - 2;\n        let min = {x:Number(v[0][0]),y:Number(v[0][1]),z:Number(v[0][2])};\n        let max = {x:Number(v[l][0]),y:Number(v[l][1]),z:Number(v[l][2])};\n\n        for ( var i = 0; i <= l; i ++ ) {\n            index ++; \n            index ++;\n            positions[ index ++ ] = (((v[i] ||[])[2]) || 0) - 50;\n            if (min.z>Number(v[i][2])){\n              min.z = Number(v[i][2]);\n            }\n            if(max.z < Number(v[i][2])){\n              max.z = Number(v[i][2])\n            }\n        }\n        props.plane.geometry.attributes.position.needsUpdate = true;\n        var loader = new THREE.TextureLoader();\n          loader.crossOrigin = \"\";\n          loader.load('../assets/cropped.png',\n              function( texture ) {\n                const material = new THREE.MeshBasicMaterial({map: texture});\n                props.plane.material = material;\n                props.plane.material.needsUpdate = true;\n              },\n              function () {},  // onProgress function\n              function ( error ) { console.log( error ) } // onError function\n          );\n        \n        var material = new THREE.MeshPhongMaterial( {\n            color: \"#000\",\n            polygonOffset: true,\n            polygonOffsetFactor: 1, // positive value pushes polygon further away\n            polygonOffsetUnits: 1\n        } );\n        props.plane.material = material;\n        props.plane.material.needsUpdate = true;\n\n        // var geo = new THREE.EdgesGeometry( props.plane.geometry ); // or WireframeGeometry\n        // var mat = new THREE.LineBasicMaterial( { color: 0x999999, linewidth: 2 } );\n        // var wireframe = new THREE.LineSegments( geo, mat );\n        // props.plane.add( wireframe );\n        const array = v;\n        const coords = {min,max};\n        dispatch(setPlane({dem:array,coords}));\n  }\n\n        \n\n      }\n","/* eslint-disable jsx-a11y/no-noninteractive-element-interactions,\nno-alert, no-console, react/no-find-dom-node */\nimport React,{ useState,useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport 'rc-tree/assets/index.css';\nimport './LayerPanel.css';\nimport Tree, { TreeNode } from \"rc-tree\";\nimport ColorPicker from \"./layout/ColorPicker\";\nimport { SketchPicker } from 'react-color';\nimport { connect } from \"react-redux\";\nimport {changeSection,toggleLayer,setLayers} from \"../actions\";\n\n\n\nfunction LayerPanel (props) {\n  const defaultExpandedKeys = props.keys;\n  const defaultSelectedKeys = [];\n  const defaultCheckedKeys = props.keys\n\n  const [keys, setKeys] = useState(props.keys);\n  const onExpand = expandedKeys => {\n    console.log('onExpand', expandedKeys);\n  };\n\n  const onSelect = (selectedKeys, info) => {\n    const title = info.node.key;\n    console.log('selected', selectedKeys, info);\n    props.changeSection(selectedKeys.length ? title : null)\n  };\n\n  const onCheck = (checkedKeys, info) => {\n    // console.log(keys,'onCheck', checkedKeys, info);\n    // keys = checkedKeys.checked;\n    // console.log(keys)\n    // console.log(keys.includes(info.node.key),keys,info.node.key,keys.indexOf(info.node.key))\n    const newLayers = {...layers};\n    layers.checked.includes(info.node.key) ? layers.checked.splice(layers.checked.indexOf(info.node.key),1) : layers.checked.push(info.node.key)\n    props.setLayers(newLayers);\n    toggleLayer({\n      name:info.node.key,\n      ...props\n    },info.checked);\n  };\n\n  const onEdit = () => {\n    setTimeout(() => {\n    }, 0);\n  };\n\n  const onDel = e => {\n    if (!window.confirm('sure to delete?')) {\n      return;\n    }\n    e.stopPropagation();\n  };\n\n  const [layers,setLayers] = useState(props.layers)\n\n  useEffect(()=>{\n    setLayers(props.layers);\n    console.log(layers.tree,layers.checked)\n  },[props.layers]);\n\n  useEffect(()=>{\n    setKeys(props.keys)\n  },[props.keys])\n\n  const customLabel = (\n      <span className=\"cus-label\">\n        <span>operations: </span>\n        <span style={{ color: 'blue' }} onClick={onEdit}>\n          Edit\n        </span>\n        &nbsp;\n        <label onClick={e => e.stopPropagation()}>\n          <input type=\"checkbox\" /> checked\n        </label>\n        &nbsp;\n        <span style={{ color: '#EB0000' }} onClick={onDel}>\n          Delete\n        </span>\n      </span>\n    );\n    \n\n    return (\n      <div className=\"layers-panel\" style={{ margin: '0 20px' }}>\n        <Tree\n          className=\"myCls\"\n          showLine={true}\n          checkable={true}\n          multiple={false}\n          checkStrictly={true}\n          selectable={true}\n          defaultExpandAll={true}\n          checkedKeys={layers.checked}\n          onSelect={onSelect}\n          onCheck={onCheck}\n          treeData={layers.tree}\n        />\n      </div>\n    );\n}\n\nconst mapStateToProps = state => {\n  return {\n    keys:state.api.keys,\n    layers:state.api.layers,\n    scene:state.api.scene,\n    plane:state.api.plane.mesh,\n    sky:state.api.sky.mesh,\n    gridHelper:state.api.plane.gridHelper,\n    backgroundColor:state.api.background.color,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeSection:section => dispatch(changeSection(section)),\n    setLayers:layers => dispatch(setLayers(layers)),\n    toggleLayer\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LayerPanel);\n","import React,{ useState,useEffect } from 'react';\nimport './ModelList.css';\nimport { connect } from \"react-redux\";\n\n// import { SimplifyModifier } from 'three/examples/jsm/modifiers/SimplifyModifier.js';\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  NavbarText\n} from 'reactstrap';\nimport createWorld from \"../helpers/createWorld\";\nimport SplitPane from 'react-split-pane';\nimport Modal from \"react-modal\";\nimport LayerPanel from \"./LayerPanel\"\nimport {loadModel,changeSection,setModelLayer,setLayers,setKeys,addModel} from \"../actions\";\n\n\nfunction ModelList(props) {\n  const [mode, setMode] = useState({});\n  const [position, setPosition] = useState(JSON.stringify({}));\n  const [scale, setScale] = useState(JSON.stringify({}));\n  const [rotation, setRotation] = useState(JSON.stringify({}));\n  const [vector, setVector] = useState({});\n\n  useEffect(()=>{\n    const newPosition = {}\n    const newRotation = {}\n    const newScale = {}\n    const newMode = {}\n    const newVector = {}\n    props.models.data.map(d=>{\n      newPosition[d.id] = position[d.id] || JSON.stringify({x:0,y:0,z:0});\n      newRotation[d.id] = rotation[d.id] || JSON.stringify({x:0,y:0,z:0});\n      newScale[d.id] = scale[d.id] || JSON.stringify({x:1,y:1,z:1});\n      newMode[d.id] = mode[d.id] || \"info\";\n      newVector[d.id] = vector[d.id] || 0;\n    })\n    setPosition(newPosition);\n    setRotation(newRotation);\n    setScale(newScale);\n    setMode(newMode);\n    setVector(newVector);\n  },[props.models.data])\n  const onChange = (func,id,oldState,value) => func({...oldState,[id]:value});\n  \n  return (\n    <div className=\"ModelList container\">\n      <div className=\"row\">\n      {props.models.data.map(d=>(\n        <div className=\"col-md-6 col-sm-6 col-xs-12\">\n          <div className=\"model-item\">\n            {mode[d.id] === \"info\" ? (<span className=\"settings\" onClick={()=>onChange(setMode,d.id,mode,\"settings\")}> \n                          <i className=\"fas fa-cog\"></i>\n                        </span> ) : (<span className=\"settings\" onClick={()=>onChange(setMode,d.id,mode,\"info\")}> \n                          <i className=\"fas fa-arrow-right\"></i>\n                        </span>)}\n            \n              {mode[d.id] === \"info\" ? (\n                <React.Fragment>\n                <div className=\"mm-form-block\">\n                  <div>id: {d.id}</div>\n                  <div>name: {d.name}</div>\n                  <div>size: {(d.size/1000/1000).toFixed(2)} Mb</div>\n                </div>\n                \n                <button className=\"mm-btn\" onClick={e=>props.addModel({d, scale,rotation,vector},props)} >Add To Scene</button>\n                </React.Fragment>\n                ):(\n                <React.Fragment>\n                  <label>Rotation</label>\n                  <input onChange={e=>onChange(setRotation,d.id,rotation,e.target.value)} value={rotation[d.id]}/>\n                  <label>Scale</label>\n                  <input onChange={e=>onChange(setScale,d.id,scale,e.target.value)} value={scale[d.id]}/>\n                  <label>Position</label>\n                  {/*<input onChange={e=>onChange(setPosition,d.id,position,e.target.value)} value={position[d.id]}/>*/}\n                  <select onChange={e=> {\n                    onChange(setVector,d.id,vector,e.target.value)\n                  }}>\n                    <option value={0} selected={vector[d.id] == 0}>Select</option>\n                    {props.vectors.map(v=><option value={v.id} selected={vector[d.id] == v.id}>{v.name}</option>)}\n                  </select>\n                </React.Fragment>\n                )}\n              \n          </div>\n        </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    models:state.api.models,\n    title:state.api.section.title,\n    scene:state.api.scene,\n    vectors:state.api.vectors.data,\n    layers:state.api.layers,\n    keys:state.api.keys,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadModel:model =>dispatch(loadModel(model)),\n    changeSection:section => dispatch(changeSection(section)),\n    setModelLayer: layer => dispatch(setModelLayer(layer)),\n    setLayers: layers => dispatch(setLayers(layers)),\n    setKeys: keys => dispatch(setKeys(keys)),\n    addModel: (options,props) => addModel(options,props)\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ModelList);\n\n","import React,{ useState,useEffect } from 'react';\n// import './Background.css';\nimport { connect } from \"react-redux\";\n\nimport {loadModel,changeSection,setModelLayer,setLayers} from \"../actions\";\n\n\nfunction Background(props) {\n \n\n  return (\n    <div className=\"Background container\">\n      <div className=\"row\">\n      Background\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    models:state.api.models,\n    title:state.api.section.title,\n    scene:state.api.scene,\n    vectors:state.api.vectors.data,\n    layers:state.api.layers\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadModel:model =>dispatch(loadModel(model)),\n    changeSection:section => dispatch(changeSection(section)),\n    setModelLayer: layer => dispatch(setModelLayer(layer)),\n    setLayers: layers => dispatch(setLayers(layers))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Background);\n\n","import React,{ useState,useEffect } from 'react';\nimport { connect } from \"react-redux\";\nimport * as THREE from 'three';\nimport {setPlane,loadGround} from \"../actions/index\";\nfunction ModelList(props) {\n  const [vector, setVector] = useState(0);\n\n  \n  const onChange = vectorId => setVector(vectorId);\n\n  return (\n    <div className=\"ModelList container\">\n      <h3>{props.title}</h3>\n      <select onChange={e=>{ props.loadGround(e.target.value,props)}}>\n        <option value={0} selected={vector == 0}>Select</option>\n        {props.vectors.map(v=><option value={v.id} selected={vector == v.id}>{v.name}</option>)}\n      </select>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    models:state.api.models,\n    title:state.api.section.title,\n    scene:state.api.scene,\n    vectors:state.api.vectors.data,\n    plane: state.api.plane.mesh,\n    coords:state.api.plane.coords\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setPlane: (array,coords) => dispatch(setPlane({dem:array,coords})),\n    loadGround: (vecId) => dispatch(loadGround(vecId)),\n\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ModelList);\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport { Carousel } from 'react-responsive-carousel';\n \nexport default function Slider (props) {\n    const onClick = (e,src) => {\n        e.stopPropagation();\n        props.onClick(src)\n    }\n        return (\n            <Carousel centerMode centerSlidePercentage={33} emulateTouch>\n                {\n                    props.slides.map(slide=>{\n                        return (\n                            <div>\n                                <img src={slide.src} className=\"mm-image mm-slider-img\"/>\n                                <p className=\"legend mm-btn\" onClick={e=>onClick(e,slide.src)}>Use {slide.legend}</p>\n                            </div>\n                        )\n                    })\n                }\n                \n\n            </Carousel>\n        );\n};","import React,{ useState,useEffect } from 'react';\n// import './Images.css';\n\nimport { connect } from \"react-redux\";\nimport * as THREE from 'three';\nimport Slider from './layout/Slider';\n\nimport {loadModel,changeSection,setModelLayer,setLayers} from \"../actions\";\n\n\nfunction Images(props) {\n  return (\n    <div className=\"Images container\">\n      <div className=\"row\">\n        <Slider \n          onClick={src=>{\n\n            if(src === \"../assets/banned.png\") {\n              props.sky.material = new THREE.MeshBasicMaterial({opacity: 0,\n                transparent: true,\n                alphaTest: 0.05,\n                side: THREE.DoubleSide\n              });\n              props.sky.material.needsUpdate = true;\n              return true;\n            }\n            var loader = new THREE.TextureLoader();\n            loader.crossOrigin = \"\";\n            loader.load(src,\n                  function( texture ) {\n                    props.sky.material = new THREE.MeshBasicMaterial( { map: texture, side: THREE.BackSide } );\n                    props.sky.material.needsUpdate = true;\n                    // props.scene.add(props.sky)  \n                  },\n                  function () {},  // onProgress function\n                  function ( error ) { console.log( error ) } // onError function\n              );\n          }}\n          slides={[\n            {src:\"../assets/banned.png\",legend:\"No Image\"},\n            {src:\"../assets/sky.jpg\",legend:\"Sky\"},\n            {src:\"../assets/night-sky.jpg\",legend:\"Night Sky\"},\n            {src:\"../assets/fantasy.jpg\",legend:\"Fantasy Sky\"},\n            ]}\n        />\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    models:state.api.models,\n    title:state.api.section.title,\n    scene:state.api.scene,\n    sky:state.api.sky.mesh,\n    vectors:state.api.vectors.data,\n    layers:state.api.layers\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadModel:model =>dispatch(loadModel(model)),\n    changeSection:section => dispatch(changeSection(section)),\n    setModelLayer: layer => dispatch(setModelLayer(layer)),\n    setLayers: layers => dispatch(setLayers(layers))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Images);\n\n","import React,{ useState,useEffect } from 'react';\n// import './Color.css';\n\nimport { connect } from \"react-redux\";\nimport * as THREE from 'three';\nimport { ChromePicker } from 'react-color';\n\nimport {loadModel,changeSection,setModelLayer,setLayers,setBackgroundColor,setGroundColor} from \"../actions\";\n\n\nfunction Color(props) {\n  const [color,setColor] = useState(props.type === \"background\" ? props.backgroundColor : props.groundColor);\n  useEffect(()=>setColor(props.type === \"background\" ? props.backgroundColor : props.groundColor),[props.type]);\n\n  const handleComplete = color => {\n    setColor(color.hex);\n    if(props.type === \"background\") {\n      props.setBackgroundColor(color.hex);\n      props.scene.background = new THREE.Color( color.hex );  \n    } else {\n      props.setGroundColor(color.hex);\n      props.plane.material.color = new THREE.Color( color.hex );  \n    }\n    \n  };\n\n  return (\n    <div className=\"Color container\">\n      <div className=\"row\">\n        <ChromePicker \n        color={color}\n        onChange={handleComplete}\n        />\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    models:state.api.models,\n    title:state.api.section.title,\n    scene:state.api.scene,\n    plane:state.api.plane.mesh,\n    vectors:state.api.vectors.data,\n    layers:state.api.layers,\n    backgroundColor:state.api.background.color,\n    groundColor:state.api.plane.color,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadModel:model =>dispatch(loadModel(model)),\n    changeSection:section => dispatch(changeSection(section)),\n    setModelLayer: layer => dispatch(setModelLayer(layer)),\n    setLayers: layers => dispatch(setLayers(layers)),\n    setBackgroundColor: color => dispatch(setBackgroundColor(color)),\n    setGroundColor: color => dispatch(setGroundColor(color)),\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Color);\n\n","import React,{ useState,useEffect } from 'react';\nimport './App.css';\nimport { connect } from \"react-redux\";\nimport * as THREE from 'three';\n// import {loadModels, addModels} from \"../helpers/demo\";\nimport DropZone from \"./layout/DropZone\";\nimport {ThemeliodesProblima_2} from \"../helpers/ThemeliodiProblimata\"\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  NavbarText\n} from 'reactstrap';\nimport createWorld from \"../helpers/createWorld\";\nimport SplitPane from 'react-split-pane';\nimport Modal from \"react-modal\";\nimport LayerPanel from \"./LayerPanel\"\nimport {setModelLayer,setModelRuntimeInfo,loadVector,loadModel,changeSection,setKeys,setScene,setLayers,setPlane,setSky,showCoords,addModel,loadDemo,loadGround} from \"../actions\";\nimport readXlsxFile from 'read-excel-file';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport * as XLSX from 'xlsx';\n\nimport ModelList from \"./ModelList\";\nimport Background from \"./Background\";\nimport Ground from \"./Ground\";\nimport Images from \"./Images\";\nimport Color from \"./Color\";\nModal.setAppElement('#root')\n\nfunction App(props) {\n  const allClasses = (name) => {\n    if(name === \"models\" ){\n      return <ModelList />\n    } else if(name === \"background\" ){\n      return <Background />\n    } \n    else if(name === \"background-color\" ){\n      return <Color type=\"background\"/>\n    }\n    else if(name === \"background-image\" ){\n      return <Images type=\"background\"/>\n    }\n    else if(name === \"ground-color\" ){\n      return <Color type=\"ground\"/>\n    }\n    else if(name === \"ground-image\" ){\n      return <Images type=\"ground\" />\n    }\n     else if(name === \"ground-vertices\" ){\n      return <Ground />\n    } else {\n      return <span></span>;\n    }\n  };\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [demoLoaded, setDemoLoaded] = useState(false);\n  const [loadingGear, setLoadingGear] = useState(false);\n  const [files, setFiles] = useState([])\n  const [elements, setElements] = useState({\n    mixers:[], camera:{}, controls:{}, scene:{}, renderer:{},pointer:{}, partials:{},loaders:{},onWindowResize:()=>{}\n  })\n  const toggleModal = ()=>setModalOpen(!modalOpen);\n  const toggleMenu = () => setMenuOpen(!menuOpen);\n  const toggleLoaded = () => setDemoLoaded(!demoLoaded);\n  const toggleLoadingGear = (b) => setLoadingGear(b);\n  const  loadGLTFModel = (file,resolve) => {\n    const {name,size,url} = file[0];\n    const {scene,loaders} = elements;\n\n    const loader = new loaders.GLTFLoader();\n    var dracoLoader = new DRACOLoader();\n    loader.setDRACOLoader( dracoLoader );\n    if(url) {\n      loader.load(url, gltf => {\n         // var scene = gltf.scene;\n\n          // model.animations = gltf.animations;\n          // model.scene = scene;\n\n          // Enable Shadows\n\n          gltf.scene.traverse( function ( object ) {\n\n            if ( object.isMesh ) {\n\n              object.castShadow = true;\n\n            }\n\n          } );\n        props.loadModel({name,size,object:gltf});\n        setModalOpen(false);       \n        const newLayers = {...props.layers};\n        newLayers.tree[0].children.push({ key: `0-${newLayers.tree[0].children.length}`, title: name, checkable:false,selectable:false})\n        props.setLayers(newLayers);       \n        resolve(true);\n\n      });\n    } else {\n      loader.load2(file, gltf => {\n         // var scene = gltf.scene;\n\n          // model.animations = gltf.animations;\n          // model.scene = scene;\n\n          // Enable Shadows\n\n          gltf.scene.traverse( function ( object ) {\n\n            if ( object.isMesh ) {\n\n              object.castShadow = true;\n\n            }\n\n          } );\n        props.loadModel({name,size,object:gltf});\n        setModalOpen(false);       \n        const newLayers = {...props.layers};\n        newLayers.tree[0].children.push({ key: `0-${newLayers.tree[0].children.length}`, title: name, checkable:false,selectable:false})\n        props.setLayers(newLayers);       \n\n      });  \n    }\n    \n  }   \n  const  loadFBXModel = (file,resolve) => {\n    const {name,size,url} = file[0];\n    const {scene,loaders} = elements;\n    const loader = new loaders.FBXLoader();\n    if (url) {\n      loader.load(url, object => {\n        // if(object.animations.length > 0) {\n        //   elements.mixer = new THREE.AnimationMixer( object );\n        //   var action = elements.mixer.clipAction( object.animations[ 0 ] );\n        //   action.play();  \n        // }\n        \n        object.traverse( child => {\n          if ( child.isMesh ) {\n            child.castShadow = true;\n            child.receiveShadow = true;\n          }\n        } );\n        props.loadModel({name,size,object});\n        setModalOpen(false);       \n        const newLayers = {...props.layers};\n        newLayers.tree[0].children.push({ key: `0-${newLayers.tree[0].children.length}`, title: name, checkable:false,selectable:false})\n        props.setLayers(newLayers);       \n        resolve(true);\n\n      });\n    } else {\n      loader.load2(file, object => {\n        // if(object.animations.length > 0) {\n        //   elements.mixer = new THREE.AnimationMixer( object );\n        //   var action = elements.mixer.clipAction( object.animations[ 0 ] );\n        //   action.play();  \n        // }\n        \n        // object.traverse( child => {\n        //   if ( child.isMesh ) {\n        //     child.castShadow = true;\n        //     child.receiveShadow = true;\n        //   }\n        // } );\n        props.loadModel({name,size,object});\n        setModalOpen(false);       \n        const newLayers = {...props.layers};\n        newLayers.tree[0].children.push({ key: `0-${newLayers.tree[0].children.length}`, title: name, checkable:false,selectable:false})\n        props.setLayers(newLayers);       \n\n      });  \n    }\n  }\n  useEffect(()=>{\n      let {mixers,camera,controls,scene,renderer,pointer,partials,loaders} = elements;\n      const rendererContainer = document.getElementById(\"three-map\");\n      const newWorld = createWorld(camera,controls,scene,renderer,pointer,partials,loaders,rendererContainer,mixers,props.setModelRuntimeInfo,props.showCoords);\n      props.setScene(newWorld.scene);\n      props.setPlane({id:Date.now(),mesh:newWorld.partials.plane,gridHelper:newWorld.partials.gridHelper});\n      props.setSky({id:Date.now(),mesh:newWorld.partials.sky});\n      setElements({...newWorld});\n  },[]);\n\n  const load = (f = []) => {\n      const pa = [];\n      const theFiles = f.length > 0 ? f : Array.prototype.slice.call(files); \n      if(theFiles.length == 0) {return  false;}\n\n      if(f.length > 0) {\n        theFiles.map(file=>{\n          pa.push(new Promise( (resolve,reject) => {\n            const extention = file.name.split(\".\")[file.name.split(\".\").length - 1].toLowerCase();\n            const vectorExt = [\"xlsx\",\"xls\",\"ods\",\"csv\",\"xyz\"];\n\n            if (vectorExt.indexOf(extention) > -1) {\n              fetch(file.url)\n                .then(res => res.text())\n                .then( (result) => {\n                  const rows = [result.split(\"\\n\").map(v=>v.split(\",\").map(a=>Number(a)))];\n                  rows[0][rows[0].length - 1] = [];\n                    const {name,size} = file;\n                    const newLayers = {...props.layers};\n                    newLayers.tree[1].children[2].children.push({ key: `1-2-${newLayers.tree[1].children[2].children.length}`, title: name,icon:<span></span>})\n                    newLayers.checked.push(`1-2-${newLayers.tree[1].children[2].children.length}`);\n                    props.setLayers(newLayers);\n                    if(name.includes(\"anime\")){\n                      for(let i=0;i< rows[0].length - 1;i++) {\n                        const Xa = rows[0][i][0]; \n                        const Ya = rows[0][i][1];\n                        const Xb = (rows[0][i + 1] || [])[0] || 0; \n                        const Yb = (rows[0][i + 1] || [])[1] || 0; \n                        const {Gab,Sab} = ThemeliodesProblima_2(Xa,Ya,Xb,Yb)\n                        rows[0][i][3] = Number(Gab);\n                        rows[0][i][4] = Number(Sab);\n                      }\n                      props.loadVector({name,size,array:rows});\n                    } else {\n                      props.loadVector({name,size,array:rows});\n                    }\n                    resolve(true);\n                  })\n                .catch(e=> {\n                  resolve(true)\n                  console.log(e)\n                })\n            } else if(extention == \"fbx\") {\n              loadFBXModel([file],resolve);\n            } else if (extention === \"glb\" || extention === \"gltf\") {\n              loadGLTFModel([file],resolve);\n            }\n          }))\n        })\n        return Promise.all(pa)\n\n      } else {\n        theFiles.map(file=>{\n          const extention = file.name.split(\".\")[file.name.split(\".\").length - 1].toLowerCase();\n          const vectorExt = [\"xlsx\",\"xls\",\"ods\",\"csv\",\"xyz\"];\n          if (vectorExt.indexOf(extention) > -1) {\n            const reader = new FileReader();\n            const rows= [];\n            reader.onload = (evt) => { // evt = on_file_select event\n              /* Parse data */\n              const bstr = evt.target.result;\n              const wb = XLSX.read(bstr, {type:'binary'});\n              /* Get first worksheet */\n              const wsname = wb.SheetNames[0];\n              const ws = wb.Sheets[wsname];\n              /* Convert array of arrays */\n              const data = XLSX.utils.sheet_to_csv(ws, {header:1});\n              /* Update state */\n              rows.push(data.split(\"\\n\").map(v=>v.split(\",\").filter(v=>v.length > 0).map(n=>Number(n))));\n\n              const {name,size} = file;\n              const newLayers = {...props.layers};\n              newLayers.tree[1].children[2].children.push({ key: `1-2-${newLayers.tree[1].children[2].children.length}`, title: name, checkable:true,selectable:false,icon:<span></span>})\n              props.setLayers(newLayers);\n              if(name.includes(\"anime\")){\n                for(let i=0;i< rows[0].length - 1;i++) {\n                  const Xa = rows[0][i][0]; \n                  const Ya = rows[0][i][1];\n                  const Xb = (rows[0][i + 1] || [])[0] || 0; \n                  const Yb = (rows[0][i + 1] || [])[1] || 0; \n                  const {Gab,Sab} = ThemeliodesProblima_2(Xa,Ya,Xb,Yb)\n                  rows[0][i][3] = Number(Gab);\n                  rows[0][i][4] = Number(Sab);\n                }\n                props.loadVector({name,size,array:rows});\n              } else {\n                props.loadVector({name,size,array:rows});\n              }\n            };\n            reader.readAsBinaryString(file);\n            setModalOpen(false);       \n            \n           \n          } else if(extention == \"fbx\") {\n            loadFBXModel([file]);\n          } else if (extention === \"glb\" || extention === \"gltf\") {\n            loadGLTFModel([file]);\n          }\n        })\n        setFiles([])\n      }\n  }\n                \n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Navbar expand=\"md\" className=\"navbar navbar-dark\">\n          <NavbarBrand href=\"#\"><div className=\"logo-container\"><div className=\"logo\"/></div></NavbarBrand>\n          <NavbarToggler onClick={toggleMenu} />\n          <Collapse isOpen={menuOpen} navbar>\n            <Nav className=\"mr-auto\" navbar>\n              <UncontrolledDropdown nav inNavbar>\n                <DropdownToggle nav caret>\n                  File\n                </DropdownToggle>\n                <DropdownMenu right>\n                  <DropdownItem onClick = {toggleModal}>\n                    <span>Import </span>\n                  </DropdownItem>\n                  <DropdownItem divider />\n                </DropdownMenu>\n              </UncontrolledDropdown>\n              <NavItem>\n                <NavLink disabled = {demoLoaded} onClick={()=>{\n                  if(!demoLoaded) {\n                    toggleLoaded();\n                    toggleLoadingGear(true);\n                    props.loadDemo(props,load,toggleLoadingGear)\n                    .then(e=>\n                      toggleLoadingGear(false)\n                    )\n                    .catch(e=>\n                      toggleLoadingGear(false)\n                    )\n                  }\n                }}>Load Demo</NavLink>\n                </NavItem>\n                <NavItem>\n                  <NavLink>\n                    <a href = \"https://youtu.be/fWYlC6shSgw\" target=\"_blank\">Youtube Video</a>\n                  </NavLink>\n              </NavItem>\n            </Nav>\n            <NavbarText>\n                <NavLink href=\"https://github.com/prieston/mergin_mode\" target=\"_blank\">\n                <i className=\"fab fa-github\"></i>\n                <span>GitHub</span>\n                </NavLink>\n            </NavbarText>\n          </Collapse>\n        </Navbar>\n      </header>\n      <main>\n      <SplitPane split=\"vertical\" minSize={50} maxSize={-50} defaultSize={\"40%\"} onChange={elements.onWindowResize}>\n        <LayerPanel />\n        <SplitPane split=\"horizontal\" minSize={50} maxSize={-50} defaultSize={\"60%\"} onChange={elements.onWindowResize}>\n          <div id = \"three-map\" >\n            <div id=\"axes-helper\"></div>\n            <div id=\"info-helper\">\n              <div id=\"epsg\">EPSG: 32634</div>\n              <div id=\"coords\"></div>\n            </div>\n          </div>\n          {(props.section!== null && allClasses(props.section)) || <span></span>}\n        </SplitPane>\n      </SplitPane>\n        \n\n      </main>\n      <div style={{visibility:loadingGear ? \"visible\" : \"hidden\"}} className=\"loading-demo\">\n      <div>\n        <div><i class=\"fas fa-cog\"></i></div>\n          <div>Loading Demo...</div>\n          <div>This might take a few minutes depending on your internet connection.</div>\n          <div>Meanwhile you can view a youtube demo by clicking the link below</div>\n          <div><a href = \"https://youtu.be/fWYlC6shSgw\" target=\"_blank\">Youtube Video</a></div>\n        </div>\n\n      </div>\n      <Modal\n        isOpen={modalOpen}\n        onRequestClose={()=>setModalOpen(!modalOpen)}\n      >\n        <div className=\"container form\">\n          <div className=\"row\">\n            <div className=\"col-sm-12\">\n              <DropZone onChange={e => {\n                setFiles([...e.target.files]);\n              }} />\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6\">\n              <button className=\"btn btn-primary form-control\" onClick={load}>Load</button>\n            </div>\n            <div className=\"col-sm-6\">\n              <button className=\"btn btn-secondary form-control\" onClick={toggleModal}>Close</button>\n            </div>\n          </div>\n        </div>\n      </Modal>\n    </div>\n    \n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    section:state.api.section.active,\n    title:state.api.section.title,\n    layers:state.api.layers,\n    vectors: state.api.vectors,\n    modelLayer:state.api.modelLayer,\n    coords:state.api.plane.coords,\n    state:state.api\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    loadModel:model =>dispatch(loadModel(model)),\n    loadVector:vector =>dispatch(loadVector(vector)),\n    changeSection:section => dispatch(changeSection(section)),\n    setScene:scene => dispatch(setScene(scene)),\n    setPlane:plane => dispatch(setPlane(plane)),\n    setSky:sky => dispatch(setSky(sky)),\n    setLayers:layers => dispatch(setLayers(layers)),\n    setKeys:keys => dispatch(setKeys(keys)),\n    showCoords:(x,y,z) => dispatch(showCoords(x,y,z)),\n    addModel: (options,props) => addModel(options,props),\n    loadDemo: (props,load) => dispatch(loadDemo(props,load)),\n    loadGround: (vecId,props) => dispatch(loadGround(vecId,props)),\n    setModelLayer: (layer) => dispatch(setModelLayer(layer)),\n    setModelRuntimeInfo:(modelId,info) => dispatch(setModelRuntimeInfo(modelId,info))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { Component }  from 'react';\nimport { combineReducers } from 'redux'\nwindow.mergin_mode = {\n\tmodelLayer: [],\n\tvectors:[],\n\tplane:{},\n\tsky:{},\n\tmixers:[]\n}\nconst initialState = {\n\tlayers:{\n\t\tchecked:[\"background-color\",\"background-image\",\"ground-grid\",\"ground-color\"],\n\t\ttree:[\n\t\t  {\n\t\t    key: 'models',\n\t\t    title: 'Models',\n\t\t    checkable:false,\n\t\t    selectable:true,\n\t\t    icon:<span className=\"layer-icon\"><i className=\"far fa-folder\"></i></span>,\n\t\t    children: [\n\t\t    ],\n\t\t  },\n\t\t  {\n\t\t    key: 'scene',\n\t\t    title: 'Scene',\n\t\t    checkable:false,\n\t\t    selectable:false,\n\t\t    icon:<span className=\"layer-icon\"><i className=\"far fa-folder\"></i></span>,\n\t\t    children: [\n\t\t      {\n\t\t        key: 'background',\n\t\t        title: 'Background',\n\t\t        checkable:false,\n\t\t   \t    icon:<span className=\"layer-icon\"><i className=\"far fa-folder\"></i></span>,\n\t\t        children: [\n\t\t        { key: 'background-color', title: 'Color',icon:<span className=\"layer-icon\"><i className=\"fas fa-palette\"></i></span>},\n\t\t        { key: 'background-image', title: 'Image',icon:<span className=\"layer-icon\"><i className=\"far fa-file-image\"></i></span> },\n\t\t        { key: 'background-video', title: 'Video',icon:<span className=\"layer-icon\"><i className=\"far fa-file-video\"></i></span> }\n\t\t      ] },\n\t\t      {\n\t\t        key: 'ground',\n\t\t        title: 'Ground',\n\t\t        checkable:false,\n\t   \t\t    icon:<span className=\"layer-icon\"><i className=\"far fa-folder\"></i></span>,\n\t   \t\t    // switcherIcon:<span className=\"layer-icon switch-icon\"><i className=\"fas fa-chevron-right\"></i></span>,\n\n\t\t        selectable:false,\n\t\t        children: [\n\t\t          { key: 'ground-color', title: 'Color',icon:<span className=\"layer-icon\"><i className=\"fas fa-palette\"></i></span>},\n\t\t          { key: 'ground-image', title: 'Image' ,icon:<span className=\"layer-icon\"><i className=\"far fa-file-image\"></i></span>},\n\t\t          { key: 'ground-vertices', title: 'Vertices' ,icon:<span className=\"layer-icon\"><i className=\"fas fa-mountain\"></i></span>},\n\t\t          { key: 'ground-grid', title: 'Grid' ,icon:<span className=\"layer-icon\"><i className=\"fab fa-slack-hash\"></i></span>}\n\t\t        ],\n\t\t      },\n\t\t      {\n\t\t        key: 'vector-layers',\n\t\t        title: 'Vector Layers',\n\t\t   \t    icon:<span className=\"layer-icon\"><i className=\"far fa-folder\"></i></span>,\n\t\t        checkable:false,\n\t\t        selectable:false,\n\t\t        children: []\n\t\t      },\n\t\t      {\n\t\t        key: 'model-layers',\n\t\t        title: 'Model Layers',\n\t\t   \t    icon:<span className=\"layer-icon\"><i className=\"far fa-folder\"></i></span>,\n\t\t        checkable:false,\n\t\t        selectable:false,\n\t\t        children: []\n\t\t      },\n\t\t    ],\n\t  },\n\t]},\n\tscene:{\t},\n\tplane:{\n\t\tid:null,\n\t\tmesh:{},\n\t\tdem:[],\n\t\tcoords:{min:{x:-50,y:-50,z:0},max:{x:50,y:50,z:0}},\n\t\tcolor:\"#222\",\n\t\tgridHelper:{}\n\t},\n\tsky:{\n\t\tid:null,\n\t\tmesh:{}\n\t},\n\tbackground:{\n\t\tcolor:\"#000\"\n\t},\n\tmodels:{\n\t\tdata:[]\n\t},\n\tvectors:{\n\t\tdata:[]\n\t},\n\tmodelLayer:[],\n\tsection:{\n\t\tactive:null,\n\t\ttitle:null\n\t}\n};\n\nconst titles= {\n\tmodels:\"Models\"\n};\n\nconst api = (state = initialState, action) => {\n  switch (action.type) {\n  \tcase \"LOAD_MODEL\":\n\t  \treturn Object.assign({},state, {\n\t  \t\tmodels: Object.assign({},state.models,{\n\t  \t\t\tdata:[\n\t  \t\t\t\t...state.models.data,\n\t  \t\t\t\t{\n\t  \t\t\t\t\tid:action.id,\n\t  \t\t\t\t\tmesh:action.model.object,\n\t  \t\t\t\t\tname:action.model.name,\n\t  \t\t\t\t\tsize:action.model.size\n\t  \t\t\t\t}\n\t  \t\t\t]\n\t  \t\t}\n\t  \t)});\n\tcase \"LOAD_VECTOR\":{\n\n\t\tconst newState = Object.assign({},state, {\n\t  \t\tvectors: Object.assign({},state.vectors,{\n\t  \t\t\tdata:[\n\t  \t\t\t\t...state.vectors.data,\n\t  \t\t\t\t{\n\t  \t\t\t\t\tid:action.id,\n\t  \t\t\t\t\tarray:action.vector.array,\n\t  \t\t\t\t\tname:action.vector.name,\n\t  \t\t\t\t\tsize:action.vector.size\n\t  \t\t\t\t}\n\t  \t\t\t]\n\t  \t\t}\n\t  \t)});\n\t  \twindow.mergin_mode.vectors = newState.vectors;\n\t  \treturn newState; \n\t}\n  \tcase \"CHANGE_SECTION\":\n\t  \treturn Object.assign({},state,{\n\t  \t\tsection:Object.assign({},state.section,{\n\t  \t\t\tactive:action.section,\n\t  \t\t\ttitle:titles[action.section] || null\n\t  \t\t})\n\t  \t});\n\tcase \"SET_KEYS\":\n\t  \treturn Object.assign({},state,{\n\t  \t\tkeys:action.keys,\n\t  \t});\n\tcase \"SET_SCENE\":\n\t  \treturn Object.assign({},state,{\n\t  \t\tscene:action.scene,\n\t  \t});\n\tcase \"SET_PLANE\":\n\t  \tconst newState = Object.assign({},state,{\n\t  \t\tplane:{...state.plane,...action.plane},\n\t  \t});\n\t  \twindow.mergin_mode.plane = newState.plane;\n\t  \treturn newState;\n\tcase \"SET_SKY\":{\n\t\t  \tconst newState = Object.assign({},state,{\n\t\t  \t\tsky:{...state.sky,...action.sky},\n\t\t  \t});\n\t\t  \twindow.mergin_mode.sky = newState.sky;\n\t\t  \treturn newState;}\n\tcase \"SET_LAYERS\":\n\t\treturn Object.assign( {},state,{\n\t\t\tlayers: {tree:[...action.layers.tree],checked:[...action.layers.checked]}\n\t  \t});\n\tcase \"SET_BACKGROUND_COLOR\":\n\t\treturn Object.assign( {},state,{\n\t\t\tbackground: {color:action.color}\n\t  \t});\n\tcase \"SET_GROUND_COLOR\":\n\t\treturn Object.assign( {},state,{\n\t\t\tplane: {...state.plane,color:action.color}\n\t  \t});\n\tcase \"SET_MODEL_LAYER\":{\n\t\tconst newState = Object.assign( {},state,{\n\t\t\tmodelLayer: [...state.modelLayer, action.layer]\n\t  \t});\n\t  \twindow.mergin_mode.modelLayer = newState.modelLayer;\n\t\treturn newState; \n\t}\n\tcase \"SET_MODEL_RUNTIME_INFO\":{\n\t\tconst newState = Object.assign( {},state,{\n\t\t\tmodelLayer: [...state.modelLayer.map(m=>{\n\t\t\t\t// console.log(m.id,action.modelId)\n\t\t\t\tif(m.id == action.modelId){\n\t\t\t\t\tm.runtimeInfo = action.runtimeInfo\n\t\t\t\t};\n\t\t\t\treturn m;\n\t\t\t})]\n\t  \t});\n\t  \twindow.mergin_mode.modelLayer = newState.modelLayer;\n\t\treturn newState; \n\t}\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  api\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux'\nimport { applyMiddleware, createStore } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport thunkMiddleware from \"redux-thunk\";\n\nimport reducer from \"./reducers\";\n\nconst rootElement = document.getElementById('root');\n\nconst loggerMiddleware = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n  applyMiddleware(thunkMiddleware , loggerMiddleware)\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n)\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}