{"version":3,"sources":["helpers/createWorld.js","components/layout/ColorPicker.js","actions/index.js","components/LayerPanel.js","components/ModelList.js","components/App.js","serviceWorker.js","reducers/index.js","index.js"],"names":["createWorld","camera","controls","scene","renderer","pointer","partials","loaders","rendererContainer","FBXLoader","THREE","raycaster","mouse","background","antialias","setPixelRatio","window","devicePixelRatio","setSize","innerWidth","innerHeight","shadowMap","enabled","document","getElementById","appendChild","domElement","position","set","up","OrbitControls","enableDamping","dampingFactor","screenSpacePanning","minDistance","maxDistance","maxPolarAngle","Math","PI","g","pos","getAttribute","pa","array","hVerts","parameters","width","wVerts","height","j","i","needsUpdate","computeVertexNormals","generateTerrain","geometry","material","color","side","flatShading","plane","castShadow","receiveShadow","add","light","shadow","near","far","left","bottom","right","top","bias","mapSize","x","y","lhelper","animate","requestAnimationFrame","update","render","addEventListener","aspect","updateProjectionMatrix","event","el","getBoundingClientRect","clientX","clientY","setFromCamera","intersects","intersectObject","length","lookAt","face","normal","copy","point","prototype","load2","files","callback","scope","this","file","reader","FileReader","onload","target","readyState","status","parse","result","responseText","readAsArrayBuffer","ColorPicker","props","keys","state","clicked","style","backgroundColof","border","borderRadius","float","React","Component","defaultProps","loadModel","model","type","id","Date","now","changeSection","section","treeData","key","title","checkable","selectable","children","Demo","onExpand","expandedKeys","console","log","onSelect","selectedKeys","info","node","toLowerCase","selKey","eventKey","onCheck","checkedKeys","onEdit","setTimeout","onDel","e","confirm","stopPropagation","setTreeRef","tree","defaultExpandedKeys","defaultSelectedKeys","defaultCheckedKeys","treeRef","createRef","className","onClick","margin","showLine","multiple","checkStrictly","defaultExpandAll","connect","dispatch","models","api","data","map","d","name","size","toFixed","Modal","setAppElement","active","useState","menuOpen","setMenuOpen","modalOpen","setModalOpen","setFiles","elements","setElements","toggleModal","useEffect","newWorld","Navbar","expand","NavbarBrand","href","NavbarToggler","Collapse","isOpen","navbar","Nav","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","DropdownMenu","DropdownItem","divider","NavItem","NavLink","NavbarText","split","minSize","maxSize","defaultSize","onRequestClose","onChange","object","traverse","child","isMesh","Boolean","location","hostname","match","initialState","titles","combineReducers","action","Object","assign","mesh","rootElement","loggerMiddleware","createLogger","store","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","applyMiddleware","thunkMiddleware","ReactDOM","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.03b15b5f.chunk.js","sourcesContent":["import * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';\n\nFBXLoader.prototype.load2 = function(files, callback) {\n    var scope = this;\n    var file = files[0];\n\n    var reader = new FileReader();\n\n    reader.onload = function(event) {\n        if (event.target.readyState === 2 || event.target.status === 0) {\n            var geometry = scope.parse(event.target.result || event.target.responseText);\n\n            if (callback)\n                callback(geometry);\n\n        } else {\n\n            // scope.dispatchEvent({type: 'error', message: 'Couldn\\'t load URL [' + url + ']', response: event.target.readyState});\n\n        }\n    };\n\n    reader.readAsArrayBuffer(file);\n\n};\n\nexport default function\tcreateWorld(camera,controls,scene,renderer,pointer,partials,loaders,rendererContainer) {\n\tloaders.FBXLoader = FBXLoader;\n\tvar clock = new THREE.Clock();\n      var raycaster = new THREE.Raycaster();\n      var mouse = new THREE.Vector2();\n\n      // init();\n      //render(); // remove when using next line for animation loop (requestAnimationFrame)\n\n        \n        const generateTerrain = (g /*,m, e*/) => {\n          const pos = g.getAttribute(\"position\");\n          const pa = pos.array;\n\n          const hVerts = g.parameters.width;\n          const wVerts = g.parameters.height;\n          for (let j = 0; j < hVerts; j++) {\n            for (let i = 0; i < wVerts; i++) {\n              pa[3 * (j * wVerts + i) + 2] = /*Math.random()*/0 \n            }\n          }\n          pos.needsUpdate = true;\n          g.computeVertexNormals();\n        };\n\n\n        scene = new THREE.Scene();\n        scene.background = new THREE.Color( 0x000000 );\n        // scene.fog = new THREE.FogExp2( 0xcccccc, 0.002 );\n        renderer = new THREE.WebGLRenderer( { antialias: true } );\n        renderer.setPixelRatio( window.devicePixelRatio );\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        renderer.shadowMap.enabled = true;\n\n\n\n        document.getElementById(\"three-map\").appendChild( renderer.domElement );\n        camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );\n        camera.position.set( 20, 20, 20 );\n        camera.up.set(0,0,1);\n        // controls\n        controls = new OrbitControls( camera, renderer.domElement );\n        //controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)\n        controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n        controls.dampingFactor = 0.05;\n        controls.screenSpacePanning = false;\n        controls.minDistance = 10;\n        controls.maxDistance = 500;\n        controls.maxPolarAngle = Math.PI / 2;\n        // world\n        var geometry = new THREE.PlaneBufferGeometry( 1000, 1000, 100, 100 );\n        generateTerrain(geometry)        \n\n        var material = new THREE.MeshPhongMaterial( {color: 0xffff00, side: THREE.DoubleSide} );\n\n        material.flatShading = true\n\n        const plane = new THREE.Mesh( geometry, material );\n        plane.position.set( 0, 0, 0 );\n\n        plane.castShadow = true;\n        plane.receiveShadow = true;\n\n        // var geometry = new THREE.SphereGeometry( 1, 32, 32 );\n        // var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );\n        // helper = new THREE.Mesh( geometry, material );\n        // scene.add( helper );\n\n        scene.add( plane );\n\n\n        // var geometry = new THREE.CylinderBufferGeometry( 0, 10, 30, 4, 1 );\n        // var material = new THREE.MeshPhongMaterial( { color: 0xffffff, flatShading: true } );\n        // for ( var i = 0; i < 500; i ++ ) {\n        //   var mesh = new THREE.Mesh( geometry, material );\n        //   mesh.position.x = Math.random() * 1600 - 800;\n        //   mesh.position.y = 0;\n        //   mesh.position.z = Math.random() * 1600 - 800;\n        //   mesh.updateMatrix();\n        //   mesh.matrixAutoUpdate = false;\n        //   scene.add( mesh );\n        // }\n        // lights\n        var light = new THREE.DirectionalLight( 0xffffff );\n        light.position.set( 1, 1, 100 );\n        light.shadow = {\n          camera: {\n            near: 0.5,\n            far: 300,\n            left: -50,\n            bottom: -50,\n            right: 50,\n            top: 50\n          },\n          bias: 0.0001,\n          mapSize: { x: 1024 * 6, y: 1024 * 6 }\n        };\n        scene.add( light );\n        \n\n        var lhelper = new THREE.DirectionalLightHelper( light, 5 );\n        scene.add( lhelper );\n\n        var light = new THREE.DirectionalLight( 0x002288 );\n        light.position.set( - 0, - 0, - 100 );\n        scene.add( light );\n\n\n        var lhelper = new THREE.DirectionalLightHelper( light, 5 );\n        scene.add( lhelper );        \n\n        var light = new THREE.AmbientLight( 0x666666 );\n        scene.add( light );\n\n\n        var geometry = new THREE.SphereGeometry( 1, 32, 32 );\n        var material = new THREE.MeshBasicMaterial( {color: 0xff0000} );\n        pointer = new THREE.Mesh( geometry, material );\n        scene.add( pointer );\n\n        // var geometry = new THREE.SphereGeometry( 1, 32, 32 );\n        // var material = new THREE.MeshBasicMaterial( {color: 0xffffff} );\n        // var test = new THREE.Mesh( geometry, material );\n        // scene.add( test );\n\n        function onMouseMove( event ) {\n        // calculate mouse position in normalized device coordinates\n        // (-1 to +1) for both components\n        const el = document.getElementById(\"three-map\").getBoundingClientRect()\n        const left = el.left;\n        const top = el.top;\n        mouse.x = ( (event.clientX-left) / window.innerWidth ) * 2 - 1;\n        mouse.y = - ( (event.clientY - top) / window.innerHeight ) * 2 + 1;\n\n        raycaster.setFromCamera( mouse, camera );\n\n        // See if the ray from the camera into the world hits one of our meshes\n        var intersects = raycaster.intersectObject( plane );\n\n        // Toggle rotation bool for meshes that we clicked\n        if ( intersects.length > 0 ) {\n\n          pointer.position.set( 0, 0, 0 );\n          pointer.lookAt( intersects[ 0 ].face.normal );\n\n          pointer.position.copy( intersects[ 0 ].point );\n\n        }\n\n}\n      function onWindowResize() {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize( window.innerWidth, window.innerHeight );\n      }\n\n      function animate() {\n        requestAnimationFrame( animate );\n        controls.update(); // only required if controls.enableDamping = true, or if controls.autoRotate = true\n        render();\n      }\n\n      function render() {\n        // var delta = clock.getDelta();\n\n        // if ( mixer ) mixer.update( delta );\n        renderer.render( scene, camera );\n      }\n\n      animate();\n       \n      window.addEventListener( 'resize', onWindowResize, false );\n      window.addEventListener( 'mousedown', onMouseMove, false );\n\n      partials = {plane,pointer};\n      return {camera,controls,scene,renderer,pointer,partials,loaders}\n} ","/* eslint-disable jsx-a11y/no-noninteractive-element-interactions,\nno-alert, no-console, react/no-find-dom-node */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { SketchPicker } from 'react-color';\n\nclass ColorPicker extends React.Component {\n  static propTypes = {\n  };\n\n  static defaultProps = {\n  };\n\n  constructor(props) {\n    super(props);\n    const { keys } = props;\n    this.state = {\n      clicked: false,\n      color:\"#000\"\n    };\n\n  }\n\n  render() {\n    if(this.state.clicked) {\n      return <SketchPicker />\n    }\n    return <div style={{\n      backgroundColof:this.state.color,\n      border:\"3px solid whitesmoke\",\n      borderRadius:\"4px\",\n      width:\"16px\",\n      height:\"16px\",\n      float:\"right\"\n    }}></div>\n  }\n}\n\nexport default ColorPicker;","export const loadModel = model => ({\n  type: 'LOAD_MODEL',\n  model,\n  id:Date.now()\n})\n\nexport const changeSection = section => ({\n  type: 'CHANGE_SECTION',\n  section\n})\n","/* eslint-disable jsx-a11y/no-noninteractive-element-interactions,\nno-alert, no-console, react/no-find-dom-node */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport 'rc-tree/assets/index.css';\nimport './LayerPanel.css';\nimport Tree, { TreeNode } from \"rc-tree\";\nimport ColorPicker from \"./layout/ColorPicker\";\nimport { SketchPicker } from 'react-color';\nimport { connect } from \"react-redux\";\nimport {changeSection} from \"../actions\";\n\nconst treeData = [\n  {\n    key: '0',\n    title: 'Models',\n    checkable:false,\n    selectable:true,\n    children: [\n\n    ],\n  },\n  {\n    key: '1',\n    title: 'Scene',\n    checkable:false,\n    selectable:false,\n    children: [\n      {\n        key: '1-0',\n        title: 'Background',\n        checkable:false,\n        selectable:false,\n        children: [\n        { key: '1-0-0', title: 'Color'},\n        { key: '1-0-1', title: 'Image' },\n        { key: '1-0-2', title: 'Video' }\n      ] },\n      {\n        key: '1-1',\n        title: 'Ground',\n        checkable:false,\n        selectable:false,\n        children: [\n          { key: '1-1-0', title: 'Color'},\n          { key: '1-1-1', title: 'Image' },\n          { key: '1-1-2', title: 'Vertices' },\n        ],\n      },\n    ],\n  },\n];\n\nclass Demo extends React.Component {\n  static propTypes = {\n    keys: PropTypes.array,\n  };\n\n  static defaultProps = {\n    keys: ['0-0-0-0'],\n  };\n\n  constructor(props) {\n    super(props);\n    const { keys } = props;\n    this.state = {\n      defaultExpandedKeys: keys,\n      defaultSelectedKeys: [],\n      defaultCheckedKeys: keys\n    };\n    this.treeRef = React.createRef();\n  }\n\n  onExpand = expandedKeys => {\n    console.log('onExpand', expandedKeys);\n  };\n\n  onSelect = (selectedKeys, info) => {\n    const title = info.node.title.toLowerCase();\n    console.log('selected', selectedKeys, info);\n    this.selKey = info.node.props.eventKey;\n    this.props.changeSection(selectedKeys.length ? title : null)\n  };\n\n  onCheck = (checkedKeys, info) => {\n    console.log(this.props)\n    console.log('onCheck', checkedKeys, info);\n  };\n\n  onEdit = () => {\n    setTimeout(() => {\n      console.log('current key: ', this.selKey);\n    }, 0);\n  };\n\n  onDel = e => {\n    if (!window.confirm('sure to delete?')) {\n      return;\n    }\n    e.stopPropagation();\n  };\n\n  setTreeRef = tree => {\n    this.tree = tree;\n  };\n\n  render() {\n    const customLabel = (\n      <span className=\"cus-label\">\n        <span>operations: </span>\n        <span style={{ color: 'blue' }} onClick={this.onEdit}>\n          Edit\n        </span>\n        &nbsp;\n        <label onClick={e => e.stopPropagation()}>\n          <input type=\"checkbox\" /> checked\n        </label>\n        &nbsp;\n        <span style={{ color: '#EB0000' }} onClick={this.onDel}>\n          Delete\n        </span>\n      </span>\n    );\n\n    return (\n      <div style={{ margin: '0 20px' }}>\n        <Tree\n          className=\"myCls\"\n          showLine={true}\n          checkable={true}\n          multiple={false}\n          checkStrictly={true}\n          selectable={true}\n          defaultExpandAll={true}\n          onExpand={this.onExpand}\n          defaultSelectedKeys={this.state.defaultSelectedKeys}\n          defaultCheckedKeys={this.state.defaultCheckedKeys}\n          onSelect={this.onSelect}\n          onCheck={this.onCheck}\n          treeData={treeData}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeSection:section => dispatch(changeSection(section))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Demo);\n","import React,{ useState,useEffect } from 'react';\nimport './ModelList.css';\nimport { connect } from \"react-redux\";\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  NavbarText\n} from 'reactstrap';\nimport createWorld from \"../helpers/createWorld\";\nimport SplitPane from 'react-split-pane';\nimport Modal from \"react-modal\";\nimport LayerPanel from \"./LayerPanel\"\nimport {loadModel,changeSection} from \"../actions\";\n\n\nfunction ModelList(props) {\n  return (\n    <div className=\"ModelList\">\n      <h3>{props.title}</h3>\n      {props.models.data.map(d=>(\n        <div className=\"model-item col-md-3 col-sm-6 col-xs-12\">\n        <div>id: {d.id}</div>\n        <div>name: {d.name}</div>\n        <div>size: {(d.size/1000/1000).toFixed(2)} Mb</div>\n        </div>\n        ))}\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    models:state.api.models,\n    title:state.api.section.title\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadModel:model =>dispatch(loadModel(model)),\n    changeSection:section => dispatch(changeSection(section))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ModelList);\n","import React,{ useState,useEffect } from 'react';\nimport './App.css';\nimport { connect } from \"react-redux\";\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  NavbarText\n} from 'reactstrap';\nimport createWorld from \"../helpers/createWorld\";\nimport SplitPane from 'react-split-pane';\nimport Modal from \"react-modal\";\nimport LayerPanel from \"./LayerPanel\"\nimport {loadModel,changeSection} from \"../actions\";\n\nimport ModelList from \"./ModelList\";\nModal.setAppElement('#root')\n\nfunction App(props) {\n  const allClasses = (name) => {\n    if(name === \"models\" ){\n      return <ModelList />\n    } else {\n      return <span></span>;\n    }\n  };\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [files, setFiles] = useState([])\n  const [elements, setElements] = useState({\n    camera:{}, controls:{}, scene:{}, renderer:{},pointer:{}, partials:{},loaders:{}\n  })\n  const toggleModal = ()=>setModalOpen(!modalOpen);\n  const toggleMenu = () => setMenuOpen(!menuOpen);\n  const  loadModel = file => {\n    const {name,size} = file[0];\n    const {scene,loaders} = elements;\n    const loader = new loaders.FBXLoader();\n      loader.load2(file, object => {\n        console.log(file)\n        object.traverse( child => {\n          if ( child.isMesh ) {\n            child.castShadow = true;\n            child.receiveShadow = true;\n          }\n        } );\n        props.loadModel({name,size,object});\n        setModalOpen(!modalOpen);       \n      });\n  }\n  useEffect(()=>{\n      let {camera,controls,scene,renderer,pointer,partials,loaders} = elements;\n      const rendererContainer = document.getElementById(\"three-map\");\n      const newWorld = createWorld(camera,controls,scene,renderer,pointer,partials,loaders,rendererContainer);\n      setElements({...newWorld});\n  },[])\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Navbar expand=\"md\" className=\"navbar navbar-dark\">\n          <NavbarBrand href=\"/\"><div className=\"logo-container\"><div className=\"logo\"/>Mergin' Mode</div></NavbarBrand>\n          <NavbarToggler onClick={toggleMenu} />\n          <Collapse isOpen={menuOpen} navbar>\n            <Nav className=\"mr-auto\" navbar>\n              <UncontrolledDropdown nav inNavbar>\n                <DropdownToggle nav caret>\n                  File\n                </DropdownToggle>\n                <DropdownMenu right>\n                  <DropdownItem onClick = {toggleModal}>\n                    <span>Import </span>\n                  </DropdownItem>\n                  <DropdownItem>\n                    Open\n                  </DropdownItem>\n                  <DropdownItem divider />\n                </DropdownMenu>\n              </UncontrolledDropdown>\n              <NavItem>\n                <NavLink href=\"https://github.com/prieston/mergin_mode\">GitHub</NavLink>\n              </NavItem>\n            </Nav>\n            <NavbarText>Mergin' Mode</NavbarText>\n          </Collapse>\n        </Navbar>\n      </header>\n      <main>\n        <SplitPane split=\"horizontal\" minSize={50} maxSize={-50} defaultSize={\"80%\"}>\n\n          <div>\n            <SplitPane split=\"vertical\" minSize={50} maxSize={-50} defaultSize={\"20%\"}>\n              <div>\n          <LayerPanel />\n                \n              </div>\n              <div id = \"three-map\" />\n            </SplitPane>\n          </div>\n          <div>\n            {props.section!== null && allClasses(props.section)}\n          </div>\n        </SplitPane>\n\n      </main>\n      <Modal\n        isOpen={modalOpen}\n        onRequestClose={()=>setModalOpen(!modalOpen)}\n      >\n        <div className=\"container form\">\n          <div className=\"row\">\n            <div className=\"col-sm-12\">\n              <input className=\"form-control\" type=\"file\" onChange={e => {\n              setFiles([...e.target.files]);\n            }}/>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6\">\n              <button className=\"btn btn-primary form-control\" onClick={()=>loadModel(files)}>Load</button>\n            </div>\n            <div className=\"col-sm-6\">\n              <button className=\"btn btn-secondary form-control\" onClick={toggleModal}>Close</button>\n            </div>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    section:state.api.section.active,\n    title:state.api.section.title\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loadModel:model =>dispatch(loadModel(model)),\n    changeSection:section => dispatch(changeSection(section))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { combineReducers } from 'redux'\nconst initialState = {\n\tmodels:{\n\t\tdata:[]\n\t},\n\tsection:{\n\t\tactive:null,\n\t\ttitle:null\n\t}\n};\n\nconst titles= {\n\tmodels:\"Models\"\n};\n\nconst api = (state = initialState, action) => {\n  switch (action.type) {\n  \tcase \"LOAD_MODEL\":\n\t  \treturn Object.assign({},state,\n\t  \t\tObject.assign({},state.models,{\n\t  \t\t\tmodels: {\n\t  \t\t\t\tdata:[\n\t  \t\t\t\t...state.models.data,\n\t  \t\t\t\t{\n\t  \t\t\t\t\tid:[action.id],\n\t  \t\t\t\t\tmesh:action.model.object,\n\t  \t\t\t\t\tname:action.model.name,\n\t  \t\t\t\t\tsize:action.model.size\n\t  \t\t\t\t}\n\t  \t\t\t\t]\n\t  \t\t}\n\t  \t\t}));\n  \tcase \"CHANGE_SECTION\":\n\t  \treturn Object.assign({},state,\n\t  \t\tObject.assign({},state.section,{\n\t  \t\t\tsection:{\n\t  \t\t\t\tactive:action.section,\n\t  \t\t\t\ttitle:titles[action.section] || null\n\t  \t\t\t},\n\t  \t\t}));\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  api\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux'\nimport { applyMiddleware, createStore } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport thunkMiddleware from \"redux-thunk\";\n\nimport reducer from \"./reducers\";\n\nconst rootElement = document.getElementById('root');\n\nconst loggerMiddleware = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n  applyMiddleware(thunkMiddleware , loggerMiddleware)\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n)\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}