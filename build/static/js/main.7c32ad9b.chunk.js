(this.webpackJsonp3drw=this.webpackJsonp3drw||[]).push([[0],{180:function(e,t){},209:function(e,t,a){e.exports=a(467)},214:function(e,t,a){},216:function(e,t,a){},230:function(e,t,a){},437:function(e,t){},438:function(e,t){},439:function(e,t,a){},467:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),o=a.n(i),c=(a(214),a(215),a(19)),l=a(9),s=a(12),d=(a(216),a(16)),m=a(1),u=a(207);var p=function(e){var t=Object(n.useCallback)((function(e){}),[]),a=Object(u.a)({onDrop:t}),i=a.getRootProps,o=a.getInputProps,c=a.isDragActive,l=Object(n.useState)(""),d=Object(s.a)(l,2),m=d[0],p=d[1];return r.a.createElement("div",Object.assign({className:"mm-dropzone"},i()),r.a.createElement("input",Object.assign({},o(),{onChange:function(t){console.log(t.target.files),p(Array.prototype.slice.call(t.target.files).map((function(e){return e.name})).join(", ")||""),e.onChange(t)}})),c?r.a.createElement("p",null,"Drop the files here ..."):r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"),r.a.createElement("p",null,r.a.createElement("a",{href:"#"},m)))},f=function(e,t,a,n){return{Xb:e+a*Math.sin(n/63.6619772367581),Yb:t+a*Math.cos(n/63.6619772367581)}},b=function(e,t,a,n){var r=Math.abs(a-e),i=Math.abs(n-t),o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));return Number(o.toFixed(4))},h=function(e,t,a,n){var r=Math.abs(a-e),i=Math.abs(n-t),o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),c=a-e,l=n-t,s=63.6619772367581*Math.atan(r/i);if(c>0&&l>0)var d=s;if(c>0&&l<0)d=200-s;if(c<0&&l<0)d=200+s;if(c<0&&l>0)d=400-s;if(0==c&&l>0)d=0;if(0==c&&l<0)d=200;if(c>0&&0==l)d=100;if(c<0&&0==l)d=300;if(0==c&&0==l)d=0;return{Gab:d.toFixed(4),Sab:o.toFixed(4)}},y=a(469),g=a(470),v=a(471),w=a(472),E=a(473),O=a(479),k=a(478),N=a(480),j=a(474),S=a(475),x=a(476),M=a(477),L=(a(221),a(120)),z=a(127),C=a(121),_=function(e,t,a){if(0==a.length)return 0;var n=(b(0,e,0,-50)/(100/99)).toFixed(4)-0,r=(b(0,t,0,50)/(100/99)).toFixed(4)-0,i=Math.floor(n),o=Math.floor(r),c=n-i,l=r-o;if(0==c&&0==l){var s=100*o+i;return Number(a[s][2].toFixed(4))}if(c<=1-l){if(!a[s=100*o+i]||!a[s+1])return 0;var d=a[s][2]-a[s+1][2],m=Math.sqrt(Math.pow(d/150-0,2)+Math.pow(100/99,2)),u=c+l,p=Math.sqrt(Math.pow(l*(100/99),2)+Math.pow(l*(100/99),2)),f=m*u,h=Math.atan(Math.abs((d/150-0)/(100/99))),y=f*Math.sin(h);if(d<0)var g=a[s][2]/150-0+y;else g=a[s][2]/150-0-y;if(!a[s]||!a[s+100])return 0;var v=a[s][2]-a[s+100][2],w=Math.sqrt(Math.pow(v/150-0,2)+Math.pow(100/99,2)),E=l+c,O=Math.sqrt(Math.pow(c*(100/99),2)+Math.pow(c*(100/99),2)),k=w*E,N=Math.atan(Math.abs((v/150-0)/(100/99))),j=k*Math.sin(N);if(v<0)var S=a[s][2]/150-0+j;else S=a[s][2]/150-0-j;var x=p/(O+p),M=Math.abs(g-S)*x;if(g-S<0)var L=g+M;else L=g-M}else{if(!a[s=100*(o+1)+i+1]||!a[s-1])return 0;d=a[s][2]-a[s-1][2],m=Math.sqrt(Math.pow(d/150-0,2)+Math.pow(100/99,2)),u=1-c+(1-l),p=Math.sqrt(Math.pow(100/99*(1-l),2)+Math.pow(100/99*(1-l),2)),f=m*u,h=Math.atan(Math.abs((d/150-0)/(100/99))),y=f*Math.sin(h);if(d<0)g=a[s][2]/150-0+y;else g=a[s][2]/150-0-y;if(!a[s]||!a[s-100])return 0;v=a[s][2]-a[s-100][2],w=Math.sqrt(Math.pow(v/150-0,2)+Math.pow(100/99,2)),E=1-l+(1-c),O=Math.sqrt(Math.pow(100/99*(1-c),2)+Math.pow(100/99*(1-c),2)),k=w*E,N=Math.atan(Math.abs((v/150-0)/(100/99))),j=k*Math.sin(N);if(v<0)S=a[s][2]/150-0+j;else S=a[s][2]/150-0-j;x=p/(O+p),M=Math.abs(g-S)*x;if(g-S<0)L=g+M;else L=g-M}return Number(L.toFixed(4))};function A(e,t,a,n,r,i,o,c,s,d,u){o.FBXLoader=z.a,o.GLTFLoader=C.a;var p=new m.j,h=new m.nb,y=new m.Gb,g=document.getElementById("three-map"),v=document.getElementById("axes-helper");a=new m.pb;var w=new m.pb;a.background=new m.k(0),(n=new m.Lb({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),n.setClearColor(0,0),n.setSize(g.clientWidth,g.clientHeight);var E=new m.Lb({antialias:!0,alpha:!0});E.setPixelRatio(window.devicePixelRatio),E.setClearColor(0,0),E.setSize(v.clientWidth,v.clientHeight),g.appendChild(n.domElement),v.appendChild(E.domElement),(e=new m.db(60,g.clientWidth/g.clientHeight,1,1e4)).position.set(80,80,80),e.up.set(0,0,1),(t=new L.a(e,n.domElement)).enableDamping=!0,t.dampingFactor=.05,t.screenSpacePanning=!1,t.minDistance=1,t.maxDistance=1e3,t.maxPolarAngle=Math.PI/2,t.rotateSpeed=.8,t.panSpeed=.8,t.zoomSpeed=.8;var O=new m.db(60,v.clientWidth/v.clientHeight,1,1e4);O.position.set(6,6,6),O.lookAt(w.position);var k=new L.a(O,n.domElement);k.enableDamping=!0,k.dampingFactor=.05,k.screenSpacePanning=!1,k.maxPolarAngle=Math.PI/2,k.enablePan=!1,k.enableZoom=!1,k.update(),function(e){for(var t=e.getAttribute("position"),a=t.array,n=2,r=0;n<a.length;n+=3,r++)a[n]=0;t.needsUpdate=!0,e.computeVertexNormals()}(R=new m.eb(100,100,99,99)),(D=new m.U({color:"#222",side:m.n})).flatShading=!0;var N=new m.R(R,D);N.position.set(0,0,0),N.castShadow=!0,N.receiveShadow=!0,a.add(N);var j=new m.u(1e4,1e3);j.geometry.rotateX(Math.PI/2),a.add(j);var S=new m.a(4210752,1);a.add(S);var x=new m.w(16777215,16777215,1);x.color.setHSL(.6,.5,.75),x.groundColor.setHSL(.095,.5,.5),x.position.set(0,0,50),a.add(x);var M=new m.m(16777215,1);window.dirLight=M,M.position.set(1,-1,1),M.position.multiplyScalar(50),M.name="dirlight",a.add(M),M.castShadow=!0,M.shadowMapWidth=M.shadowMapHeight=2048;var A=300;M.shadowCameraLeft=-A,M.shadowCameraRight=A,M.shadowCameraTop=A,M.shadowCameraBottom=-A,M.shadowCameraFar=3500,M.shadowBias=-1e-4,M.shadowDarkness=.35;var R=new m.wb(.5,32,32),D=new m.S({color:"red"});r=new m.R(R,D);R=new m.wb(150,32,32);(new m.Bb).crossOrigin="";R=new m.wb(150,32,32),D=new m.S({opacity:0,transparent:!0,alphaTest:.05,side:m.n});var I=new m.R(R,D);function T(){e.aspect=g.clientWidth/g.clientHeight,e.updateProjectionMatrix(),O.updateProjectionMatrix(),n.setSize(g.clientWidth,g.clientHeight)}return I.rotation.set(Math.PI/2,0,0),a.add(I),function r(){requestAnimationFrame(r),t.update(),k.update(),function(){for(var t=p.getDelta(),r=0;r<window.mergin_mode.mixers.length;++r)window.mergin_mode.mixers[r].update(t);window.mergin_mode.modelLayer.map((function(e){var a=Object(l.a)({},e,{mesh:e.mesh.children[0]}),n=a.mesh.position,r=n.x,i=n.y,o=n.z,c=a.runtimeInfo,s=c.animating,u=c.activeRow,p=window.mergin_mode.vectors.data.filter((function(e){return e.id==a.vectorId}))[0].array[0][u],h=p[0],y=p[1],g=(p[2],p[3]),v=p[4];if(s&&"undefined"!==typeof r&&"undefined"!==typeof i&&"undefined"!==typeof o){var w=window.mergin_mode.plane.dem,E=function(e,t,a,n,r,i){var o=f(e,t,1.75*r,n),c=_(o.Xb,o.Yb,i);return{x:o.Xb,y:o.Yb,z:c}}(Number(r.toFixed(4)),Number(i.toFixed(4)),Number(o.toFixed(4)),g,t,w),O=E.x,k=E.y,N=E.z,j=b(h,y,r,i);if(j===1/0&&(j=0),j<v)a.mesh.position.set(O,k,N);else{var S=window.mergin_mode.vectors.data.filter((function(e){return e.id==a.vectorId}))[0].array[0][u+1];if(S){d(a.id,{animating:!0,activeRow:u+1});var x=new m.Hb(0,0,1);a.mesh.rotateOnWorldAxis(x,-(400-p[3]+S[3])/63.6619772367581)}else{window.mergin_mode.vectors.data.filter((function(e){return e.id==a.vectorId}))[0].array[0][0];d(a.id,{animating:!1,activeRow:0})}}}})),n.render(a,e),E.render(w,O)}()}(),window.addEventListener("resize",T,!1),document.getElementById("three-map").addEventListener("click",(function(t){var a=document.getElementById("three-map").getBoundingClientRect(),n=a.left,i=a.top;y.x=(t.clientX-n)/g.clientWidth*2-1,y.y=-(t.clientY-i)/g.clientHeight*2+1,h.setFromCamera(y,e);var o=h.intersectObject(N);if(o.length>0){r.position.set(0,0,0),r.lookAt(o[0].face.normal),r.position.copy(o[0].point);var c=Math.sqrt(Math.pow(0,2)+Math.pow(r.position.x- -50,2))/100,l=Math.sqrt(Math.pow(0,2)+Math.pow(-50-r.position.y,2))/100,s=Math.sqrt(Math.pow(0,2)+Math.pow(0-r.position.z,2));u(c,l,s),window.array=window.array||"",window.array+="".concat(r.position.x.toFixed(4),",").concat(r.position.y.toFixed(4),",").concat(r.position.z.toFixed(4),"\n")}}),!1),{camera:e,controls:t,scene:a,renderer:n,pointer:r,partials:{plane:N,pointer:r,sky:I,gridHelper:j},loaders:o,onWindowResize:T}}C.a.prototype.load2=function(e,t){var a=this,n=e[0],r=new FileReader;r.onload=function(e){2!==e.target.readyState&&0!==e.target.status||a.parse(e.target.result||e.target.responseText,"",t)},r.readAsArrayBuffer(n)},z.a.prototype.load2=function(e,t){var a=this,n=e[0],r=new FileReader;r.onload=function(e){if(2===e.target.readyState||0===e.target.status){var n=a.parse(e.target.result||e.target.responseText);t&&t(n)}},r.readAsArrayBuffer(n)};var R=a(78),D=a(79),I=a.n(D),T=(a(229),a(230),a(206)),F=a(57),P=a(198),H=a(59),B=a(58),J=a(60),W=a(56),G=function(e){function t(e){var a;Object(F.a)(this,t),a=Object(H.a)(this,Object(B.a)(t).call(this,e));e.keys;return a.state={clicked:!1,color:"#000"},a}return Object(J.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return this.state.clicked?r.a.createElement(W.SketchPicker,null):r.a.createElement("div",{style:{backgroundColof:this.state.color,border:"3px solid whitesmoke",borderRadius:"4px",width:"16px",height:"16px",float:"right"}})}}]),t}(r.a.Component);G.defaultProps={};var U=a(4),q=a(123),V=a(199),Y=function(e){return{type:"LOAD_MODEL",model:e,id:Date.now()}},X=function(e){return{type:"SET_KEYS",keys:e}},K=function(e){return{type:"SET_PLANE",plane:e,id:Date.now()}},Z=function(e){return{type:"CHANGE_SECTION",section:e}},$=function(e){return{type:"SET_LAYERS",layers:e}},Q=function(e){return{type:"SET_MODEL_LAYER",layer:e}},ee=function(e,t){var a=e.name.split("-")[0],n=e.name.split("-")[1];if("background"===a)"color"===n?e.scene.background=t?new m.k(e.backgroundColor):null:"image"===n&&(e.sky.visible=t);else if("ground"===a)"grid"==n?e.gridHelper.visible=t:"color"==n&&(console.log(e),e.plane.visible=t);else if("models"===a){e.scene.getObjectById(Number(n),!0).visible=t}},te=function(e,t){var a=e.d,n=e.scale,r=e.rotation,i=e.vector,o=t.vectors.filter((function(e){return e.id==i[a.id]}))[0];if(!o)return!1;var s=new m.v;if(o.name.toLowerCase().includes("anime")){var d,u;if(a.name.toLowerCase().includes("glb")||a.name.toLowerCase().includes("gltf")){var p=_(u=q.a.clone(a.mesh.scene),a.mesh.animations,"Walk");window.mergin_mode.mixers.push(p)}else{p=_((u=a.mesh.clone()).children[0],a.mesh.animations,"Walk");window.mergin_mode.mixers.push(p)}var f=JSON.parse(r[a.id]);f.x=Number(f.x),f.y=Number(f.y),f.z=Number(f.z);var b=JSON.parse(n[a.id]);b.x=Number(b.x),b.y=Number(b.y),b.z=Number(b.z);var h=new m.Hb(1,0,0),y=new m.Hb(0,1,0),g=new m.Hb(0,0,1);u.rotateOnWorldAxis(h,f.x),u.rotateOnWorldAxis(y,f.y),u.rotateOnWorldAxis(g,-o.array[0][0][3]/63.6619772367581),u.scale.set(b.x,b.y,b.z),(d=u.position).set.apply(d,Object(c.a)(o.array[0][0])),u.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),s.add(u),t.setModelLayer({id:Date.now(),vectorId:o.id,runtimeInfo:{animating:!0,activeRow:0},mesh:s})}else{var v;if(v=a.name.toLowerCase().includes("glb")||a.name.toLowerCase().includes("gltf")?q.a.clone(a.mesh.scene):a.mesh.clone(),o.array[0].length>2){for(var w=new V.a(v,o.array[0].length),E=0;E<o.array[0].length-1;E++){var O,k=new m.bb;k.frustumCulled=!1;var N=JSON.parse(r[a.id]);N.x=Number(N.x),N.y=Number(N.y),N.z=Number(N.z);var j=new m.Hb(1,0,0),S=new m.Hb(0,1,0),x=new m.Hb(0,0,1);k.rotateOnWorldAxis(j,N.x),k.rotateOnWorldAxis(S,N.y),k.rotateOnWorldAxis(x,2*Math.random()*Math.PI);var M=.1*Math.random(),L=.1*Math.random()+.05,z=JSON.parse(n[a.id]);z.x=Number(z.x)+M,z.y=Number(z.y)+M,z.z=Number(z.z)+L,k.scale.set(z.x,z.y,z.z),(O=k.position).set.apply(O,Object(c.a)(o.array[0][E])),k.updateMatrix(),w.setMatrixAt(E,k.matrix)}w.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),s.add(w)}else o.array[0].map((function(e){var t;if(0==e.length)return!1;o.name.includes("new"),v.traverse((function(e){e.isMesh&&(e.material.transparent=!0,e.material.opacity=1,e.material.needsUpdate=!0,e.castShadow=!0,e.receiveShadow=!0)}));var i=JSON.parse(r[a.id]);i.x=Number(i.x),i.y=Number(i.y),i.z=Number(i.z);var l=new m.Hb(1,0,0),d=new m.Hb(0,1,0),u=new m.Hb(0,0,1);v.rotateOnWorldAxis(l,i.x),v.rotateOnWorldAxis(d,i.y),v.rotateOnWorldAxis(u,i.z);var p=JSON.parse(n[a.id]);p.x=Number(p.x),p.y=Number(p.y),p.z=Number(p.z),v.rotation.set(i.x,i.y,i.z),v.scale.set(p.x,p.y,p.z),(t=v.position).set.apply(t,Object(c.a)(e)),window.meshes=window.meshes||[],window.meshes.push(v),window.mesh=v,s.add(v)}))}var C=Object(l.a)({},t.layers);function _(e,t,a){var n=new m.c(e),r=m.b.findByName(t,a);r&&n.clipAction(r).play();return n}C.checked.push("models-".concat(s.id)),C.tree[1].children[3].children.push({key:"models-".concat(s.id),title:a.name+"_"+o.name}),t.scene.add(s),t.setLayers(C)},ae=function(e){return function(t,a){var n=a(),r={vectors:n.api.vectors.data,plane:n.api.plane.mesh},i=r.vectors.filter((function(t){return t.id==e}))[0];if(!i)return!1;i=i.array[0];var o,c=r.plane.geometry.attributes.position.array;o=0;for(var l=i.length-2,s={x:Number(i[0][0]),y:Number(i[0][1]),z:Number(i[0][2])},d={x:Number(i[l][0]),y:Number(i[l][1]),z:Number(i[l][2])},u=0;u<=l;u++)o++,o++,c[o++]=((i[u]||[])[2]||0)-50,s.z>Number(i[u][2])&&(s.z=Number(i[u][2])),d.z<Number(i[u][2])&&(d.z=Number(i[u][2]));r.plane.geometry.attributes.position.needsUpdate=!0;var p=new m.Bb;p.crossOrigin="",p.load("../assets/cropped.png",(function(e){var t=new m.S({map:e});r.plane.material=t,r.plane.material.needsUpdate=!0}),(function(){}),(function(e){console.log(e)}));var f=new m.U({color:"#000",polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1});r.plane.material=f,r.plane.material.needsUpdate=!0,t(K({dem:i,coords:{min:s,max:d}}))}};var ne=Object(d.b)((function(e){return{keys:e.api.keys,layers:e.api.layers,scene:e.api.scene,plane:e.api.plane.mesh,sky:e.api.sky.mesh,gridHelper:e.api.plane.gridHelper,backgroundColor:e.api.background.color}}),(function(e){return{changeSection:function(t){return e(Z(t))},setLayers:function(t){return e($(t))},toggleLayer:ee}}))((function(e){e.keys,e.keys;var t=Object(n.useState)(e.keys),a=Object(s.a)(t,2),i=(a[0],a[1]),o=Object(n.useState)(e.layers),c=Object(s.a)(o,2),d=c[0],m=c[1];return Object(n.useEffect)((function(){m(e.layers),console.log(d.tree,d.checked)}),[e.layers]),Object(n.useEffect)((function(){i(e.keys)}),[e.keys]),r.a.createElement("span",{className:"cus-label"},r.a.createElement("span",null,"operations: "),r.a.createElement("span",{style:{color:"blue"},onClick:function(){setTimeout((function(){}),0)}},"Edit"),"\xa0",r.a.createElement("label",{onClick:function(e){return e.stopPropagation()}},r.a.createElement("input",{type:"checkbox"})," checked"),"\xa0",r.a.createElement("span",{style:{color:"#EB0000"},onClick:function(e){window.confirm("sure to delete?")&&e.stopPropagation()}},"Delete")),r.a.createElement("div",{className:"layers-panel",style:{margin:"0 20px"}},r.a.createElement(T.a,{className:"myCls",showLine:!0,checkable:!0,multiple:!1,checkStrictly:!0,selectable:!0,defaultExpandAll:!0,checkedKeys:d.checked,onSelect:function(t,a){var n=a.node.key;console.log("selected",t,a),e.changeSection(t.length?n:null)},onCheck:function(t,a){var n=Object(l.a)({},d);d.checked.includes(a.node.key)?d.checked.splice(d.checked.indexOf(a.node.key),1):d.checked.push(a.node.key),e.setLayers(n),ee(Object(l.a)({name:a.node.key},e),a.checked)},treeData:d.tree}))})),re=a(200),ie=a(124);a(439);var oe=Object(d.b)((function(e){return{models:e.api.models,title:e.api.section.title,scene:e.api.scene,vectors:e.api.vectors.data,layers:e.api.layers,keys:e.api.keys}}),(function(e){return{loadModel:function(t){return e(Y(t))},changeSection:function(t){return e(Z(t))},setModelLayer:function(t){return e(Q(t))},setLayers:function(t){return e($(t))},setKeys:function(t){return e(X(t))},addModel:function(e,t){return te(e,t)}}}))((function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(JSON.stringify({})),d=Object(s.a)(c,2),m=d[0],u=d[1],p=Object(n.useState)(JSON.stringify({})),f=Object(s.a)(p,2),b=f[0],h=f[1],y=Object(n.useState)(JSON.stringify({})),g=Object(s.a)(y,2),v=g[0],w=g[1],E=Object(n.useState)({}),O=Object(s.a)(E,2),k=O[0],N=O[1];Object(n.useEffect)((function(){var t={},a={},n={},r={},c={};e.models.data.map((function(e){t[e.id]=m[e.id]||JSON.stringify({x:0,y:0,z:0}),a[e.id]=v[e.id]||JSON.stringify({x:0,y:0,z:0}),n[e.id]=b[e.id]||JSON.stringify({x:1,y:1,z:1}),r[e.id]=i[e.id]||"info",c[e.id]=k[e.id]||0})),u(t),w(a),h(n),o(r),N(c)}),[e.models.data]);var j=function(e,t,a,n){return e(Object(l.a)({},a,Object(U.a)({},t,n)))};return r.a.createElement("div",{className:"ModelList container"},r.a.createElement("div",{className:"row"},e.models.data.map((function(t){return r.a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"model-item"},"info"===i[t.id]?r.a.createElement("span",{className:"settings",onClick:function(){return j(o,t.id,i,"settings")}},r.a.createElement("i",{className:"fas fa-cog"})):r.a.createElement("span",{className:"settings",onClick:function(){return j(o,t.id,i,"info")}},r.a.createElement("i",{className:"fas fa-arrow-right"})),"info"===i[t.id]?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mm-form-block"},r.a.createElement("div",null,"id: ",t.id),r.a.createElement("div",null,"name: ",t.name),r.a.createElement("div",null,"size: ",(t.size/1e3/1e3).toFixed(2)," Mb")),r.a.createElement("button",{className:"mm-btn",onClick:function(a){return e.addModel({d:t,scale:b,rotation:v,vector:k},e)}},"Add To Scene")):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Rotation"),r.a.createElement("input",{onChange:function(e){return j(w,t.id,v,e.target.value)},value:v[t.id]}),r.a.createElement("label",null,"Scale"),r.a.createElement("input",{onChange:function(e){return j(h,t.id,b,e.target.value)},value:b[t.id]}),r.a.createElement("label",null,"Position"),r.a.createElement("select",{onChange:function(e){j(N,t.id,k,e.target.value)}},r.a.createElement("option",{value:0,selected:0==k[t.id]},"Select"),e.vectors.map((function(e){return r.a.createElement("option",{value:e.id,selected:k[t.id]==e.id},e.name)}))))))}))))}));var ce=Object(d.b)((function(e){return{models:e.api.models,title:e.api.section.title,scene:e.api.scene,vectors:e.api.vectors.data,layers:e.api.layers}}),(function(e){return{loadModel:function(t){return e(Y(t))},changeSection:function(t){return e(Z(t))},setModelLayer:function(t){return e(Q(t))},setLayers:function(t){return e($(t))}}}))((function(e){return r.a.createElement("div",{className:"Background container"},r.a.createElement("div",{className:"row"},"Background"))}));var le=Object(d.b)((function(e){return{models:e.api.models,title:e.api.section.title,scene:e.api.scene,vectors:e.api.vectors.data,plane:e.api.plane.mesh,coords:e.api.plane.coords}}),(function(e){return{setPlane:function(t,a){return e(K({dem:t,coords:a}))},loadGround:function(t){return e(ae(t))}}}))((function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),i=a[0];return a[1],r.a.createElement("div",{className:"ModelList container"},r.a.createElement("h3",null,e.title),r.a.createElement("select",{onChange:function(t){e.loadGround(t.target.value,e)}},r.a.createElement("option",{value:0,selected:0==i},"Select"),e.vectors.map((function(e){return r.a.createElement("option",{value:e.id,selected:i==e.id},e.name)}))))})),se=(a(440),a(201));function de(e){return r.a.createElement(se.Carousel,{centerMode:!0,centerSlidePercentage:33,emulateTouch:!0},e.slides.map((function(t){return r.a.createElement("div",null,r.a.createElement("img",{src:t.src,className:"mm-image mm-slider-img"}),r.a.createElement("p",{className:"legend mm-btn",onClick:function(a){return function(t,a){t.stopPropagation(),e.onClick(a)}(a,t.src)}},"Use ",t.legend))})))}var me=Object(d.b)((function(e){return{models:e.api.models,title:e.api.section.title,scene:e.api.scene,sky:e.api.sky.mesh,vectors:e.api.vectors.data,layers:e.api.layers}}),(function(e){return{loadModel:function(t){return e(Y(t))},changeSection:function(t){return e(Z(t))},setModelLayer:function(t){return e(Q(t))},setLayers:function(t){return e($(t))}}}))((function(e){return r.a.createElement("div",{className:"Images container"},r.a.createElement("div",{className:"row"},r.a.createElement(de,{onClick:function(t){if("../assets/banned.png"===t)return e.sky.material=new m.S({opacity:0,transparent:!0,alphaTest:.05,side:m.n}),e.sky.material.needsUpdate=!0,!0;var a=new m.Bb;a.crossOrigin="",a.load(t,(function(t){e.sky.material=new m.S({map:t,side:m.d}),e.sky.material.needsUpdate=!0}),(function(){}),(function(e){console.log(e)}))},slides:[{src:"../assets/banned.png",legend:"No Image"},{src:"../assets/sky.jpg",legend:"Sky"},{src:"../assets/night-sky.jpg",legend:"Night Sky"},{src:"../assets/fantasy.jpg",legend:"Fantasy Sky"}]})))}));var ue=Object(d.b)((function(e){return{models:e.api.models,title:e.api.section.title,scene:e.api.scene,plane:e.api.plane.mesh,vectors:e.api.vectors.data,layers:e.api.layers,backgroundColor:e.api.background.color,groundColor:e.api.plane.color}}),(function(e){return{loadModel:function(t){return e(Y(t))},changeSection:function(t){return e(Z(t))},setModelLayer:function(t){return e(Q(t))},setLayers:function(t){return e($(t))},setBackgroundColor:function(t){return e(function(e){return{type:"SET_BACKGROUND_COLOR",color:e}}(t))},setGroundColor:function(t){return e(function(e){return{type:"SET_GROUND_COLOR",color:e}}(t))}}}))((function(e){var t=Object(n.useState)("background"===e.type?e.backgroundColor:e.groundColor),a=Object(s.a)(t,2),i=a[0],o=a[1];return Object(n.useEffect)((function(){return o("background"===e.type?e.backgroundColor:e.groundColor)}),[e.type]),r.a.createElement("div",{className:"Color container"},r.a.createElement("div",{className:"row"},r.a.createElement(W.ChromePicker,{color:i,onChange:function(t){o(t.hex),"background"===e.type?(e.setBackgroundColor(t.hex),e.scene.background=new m.k(t.hex)):(e.setGroundColor(t.hex),e.plane.material.color=new m.k(t.hex))}})))}));I.a.setAppElement("#root");var pe=Object(d.b)((function(e){return{section:e.api.section.active,title:e.api.section.title,layers:e.api.layers,vectors:e.api.vectors,modelLayer:e.api.modelLayer,coords:e.api.plane.coords,state:e.api}}),(function(e){return{loadModel:function(t){return e(Y(t))},loadVector:function(t){return e(function(e){return{type:"LOAD_VECTOR",vector:e,id:Date.now()}}(t))},changeSection:function(t){return e(Z(t))},setScene:function(t){return e(function(e){return{type:"SET_SCENE",scene:e,id:Date.now()}}(t))},setPlane:function(t){return e(K(t))},setSky:function(t){return e(function(e){return{type:"SET_SKY",sky:e,id:Date.now()}}(t))},setLayers:function(t){return e($(t))},setKeys:function(t){return e(X(t))},showCoords:function(t,a,n){return e(function(e,t,a){return function(n,r){var i=r().api.plane.coords,o=i.max.x-i.min.x,c=i.max.y-i.min.y;console.log(o,c),document.getElementById("coords").innerHTML="".concat((e*o+i.min.x).toFixed(2),", ").concat((t*c+i.min.y).toFixed(2),",").concat((i.min.z+a).toFixed(2))}}(t,a,n))},addModel:function(e,t){return te(e,t)},loadDemo:function(t,a){return e(function(e,t){return function(a,n){return t([{name:"loutro-old.glb",size:"0",url:"/demo/loutro-old.glb"},{name:"tree-green.fbx",size:"0",url:"/demo/tree-green.fbx"},{name:"tree-red.fbx",size:"0",url:"/demo/tree-red.fbx"},{name:"loutro-new.gltf",size:"0",url:"/demo/loutro-new.gltf"},{name:"man-walking.gltf",size:"0",url:"/demo/Soldier.glb"},{name:"loutro-old.csv",size:"0",url:"/demo/loutro-old.csv"},{name:"loutro-new.csv",size:"0",url:"/demo/loutro-new.csv"},{name:"trees-green.csv",size:"0",url:"/demo/trees-green.csv"},{name:"trees-red.csv",size:"0",url:"/demo/trees-red.csv"},{name:"dtm.csv",size:"0",url:"/demo/dtm.csv"},{name:"anime-path-1.csv",size:"0",url:"/demo/anime-path-1.csv"},{name:"anime-path-2.csv",size:"0",url:"/demo/anime-path-2.csv"},{name:"anime-path-3.csv",size:"0",url:"/demo/anime-path-3.csv"},{name:"anime-path-4.csv",size:"0",url:"/demo/anime-path-4.csv"}]).then((function(){var t,a,r,i,o=n();t=o.api.models.data.filter((function(e){return"tree-green.fbx"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"trees-green.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:.1,y:.1,z:.1})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene})),t=o.api.models.data.filter((function(e){return"tree-red.fbx"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"trees-red.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:.1,y:.1,z:.1})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene}));var c=new m.Bb;return c.crossOrigin="",c.load("../assets/fantasy.jpg",(function(e){o.api.sky.mesh.material=new m.S({map:e,side:m.d}),o.api.sky.mesh.material.needsUpdate=!0}),(function(){}),(function(e){console.log(e)})),e.loadGround(o.api.vectors.data.filter((function(e){return"dtm.csv"===e.name}))[0].id,e),t=o.api.models.data.filter((function(e){return"loutro-old.glb"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"loutro-old.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:1.1,y:1.1,z:1.1})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene})),t=o.api.models.data.filter((function(e){return"loutro-new.gltf"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"loutro-new.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:11,y:11,z:11})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene})),t=o.api.models.data.filter((function(e){return"man-walking.gltf"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"anime-path-1.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:1,y:1,z:1})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene})),t=o.api.models.data.filter((function(e){return"man-walking.gltf"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"anime-path-2.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:1,y:1,z:1})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene})),t=o.api.models.data.filter((function(e){return"man-walking.gltf"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"anime-path-3.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:1,y:1,z:1})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene})),t=o.api.models.data.filter((function(e){return"man-walking.gltf"===e.name}))[0],a=Object(U.a)({},t.id,o.api.vectors.data.filter((function(e){return"anime-path-4.csv"===e.name}))[0].id),r=Object(U.a)({},t.id,JSON.stringify({x:1.57,y:0,z:0})),i=Object(U.a)({},t.id,JSON.stringify({x:1,y:1,z:1})),e.addModel({d:t,scale:i,rotation:r,vector:a},Object(l.a)({},e,{section:o.api.section.active,title:o.api.section.title,layers:o.api.layers,vectors:o.api.vectors.data,modelLayer:o.api.modelLayer,coords:o.api.plane.coords,state:o.api,scene:o.api.scene})),Promise.resolve(!0)}))}}(t,a))},loadGround:function(t,a){return e(ae(t))},setModelLayer:function(t){return e(Q(t))},setModelRuntimeInfo:function(t,a){return e(function(e,t){return{type:"SET_MODEL_RUNTIME_INFO",modelId:e,runtimeInfo:Object(l.a)({},t)}}(t,a))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),i=a[0],o=a[1],d=Object(n.useState)(!1),m=Object(s.a)(d,2),u=m[0],f=m[1],b=Object(n.useState)(!1),L=Object(s.a)(b,2),z=L[0],C=L[1],_=Object(n.useState)(!1),D=Object(s.a)(_,2),T=D[0],F=D[1],P=Object(n.useState)([]),H=Object(s.a)(P,2),B=H[0],J=H[1],W=Object(n.useState)({mixers:[],camera:{},controls:{},scene:{},renderer:{},pointer:{},partials:{},loaders:{},onWindowResize:function(){}}),G=Object(s.a)(W,2),U=G[0],q=G[1],V=function(){return f(!u)},Y=function(e){return F(e)},X=function(t,a){var n=t[0],r=n.name,i=n.size,o=n.url,c=(U.scene,new U.loaders.GLTFLoader),s=new re.a;c.setDRACOLoader(s),o?c.load(o,(function(t){t.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),e.loadModel({name:r,size:i,object:t}),f(!1);var n=Object(l.a)({},e.layers);n.tree[0].children.push({key:"0-".concat(n.tree[0].children.length),title:r,checkable:!1,selectable:!1}),e.setLayers(n),a(!0)})):c.load2(t,(function(t){t.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),e.loadModel({name:r,size:i,object:t}),f(!1);var a=Object(l.a)({},e.layers);a.tree[0].children.push({key:"0-".concat(a.tree[0].children.length),title:r,checkable:!1,selectable:!1}),e.setLayers(a)}))},K=function(t,a){var n=t[0],r=n.name,i=n.size,o=n.url,c=(U.scene,new U.loaders.FBXLoader);o?c.load(o,(function(t){t.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.loadModel({name:r,size:i,object:t}),f(!1);var n=Object(l.a)({},e.layers);n.tree[0].children.push({key:"0-".concat(n.tree[0].children.length),title:r,checkable:!1,selectable:!1}),e.setLayers(n),a(!0)})):c.load2(t,(function(t){e.loadModel({name:r,size:i,object:t}),f(!1);var a=Object(l.a)({},e.layers);a.tree[0].children.push({key:"0-".concat(a.tree[0].children.length),title:r,checkable:!1,selectable:!1}),e.setLayers(a)}))};Object(n.useEffect)((function(){U.mixers;var t=U.camera,a=U.controls,n=U.scene,r=U.renderer,i=U.pointer,o=(U.partials,U.loaders),c=(document.getElementById("three-map"),A(t,a,n,r,i,0,o,0,0,e.setModelRuntimeInfo,e.showCoords));e.setScene(c.scene),e.setPlane({id:Date.now(),mesh:c.partials.plane,gridHelper:c.partials.gridHelper}),e.setSky({id:Date.now(),mesh:c.partials.sky}),q(Object(l.a)({},c))}),[]);var Z,$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=[],n=t.length>0?t:Array.prototype.slice.call(B);return 0!=n.length&&(t.length>0?(n.map((function(t){a.push(new Promise((function(a,n){var i=t.name.split(".")[t.name.split(".").length-1].toLowerCase();["xlsx","xls","ods","csv","xyz"].indexOf(i)>-1?fetch(t.url).then((function(e){return e.text()})).then((function(n){var i=[n.split("\n").map((function(e){return e.split(",").map((function(e){return Number(e)}))}))];i[0][i[0].length-1]=[];var o=t.name,c=t.size,s=Object(l.a)({},e.layers);if(s.tree[1].children[2].children.push({key:"1-2-".concat(s.tree[1].children[2].children.length),title:o,icon:r.a.createElement("span",null)}),s.checked.push("1-2-".concat(s.tree[1].children[2].children.length)),e.setLayers(s),o.includes("anime")){for(var d=0;d<i[0].length-1;d++){var m=i[0][d][0],u=i[0][d][1],p=(i[0][d+1]||[])[0]||0,f=(i[0][d+1]||[])[1]||0,b=h(m,u,p,f),y=b.Gab,g=b.Sab;i[0][d][3]=Number(y),i[0][d][4]=Number(g)}e.loadVector({name:o,size:c,array:i})}else e.loadVector({name:o,size:c,array:i});a(!0)})).catch((function(e){a(!0),console.log(e)})):"fbx"==i?K([t],a):"glb"!==i&&"gltf"!==i||X([t],a)})))})),Promise.all(a)):(n.map((function(t){var a=t.name.split(".")[t.name.split(".").length-1].toLowerCase();if(["xlsx","xls","ods","csv","xyz"].indexOf(a)>-1){var n=new FileReader,i=[];n.onload=function(a){var n=a.target.result,o=ie.read(n,{type:"binary"}),c=o.SheetNames[0],s=o.Sheets[c],d=ie.utils.sheet_to_csv(s,{header:1});i.push(d.split("\n").map((function(e){return e.split(",").filter((function(e){return e.length>0})).map((function(e){return Number(e)}))})));var m=t.name,u=t.size,p=Object(l.a)({},e.layers);if(p.tree[1].children[2].children.push({key:"1-2-".concat(p.tree[1].children[2].children.length),title:m,checkable:!0,selectable:!1,icon:r.a.createElement("span",null)}),e.setLayers(p),m.includes("anime")){for(var f=0;f<i[0].length-1;f++){var b=i[0][f][0],y=i[0][f][1],g=(i[0][f+1]||[])[0]||0,v=(i[0][f+1]||[])[1]||0,w=h(b,y,g,v),E=w.Gab,O=w.Sab;i[0][f][3]=Number(E),i[0][f][4]=Number(O)}e.loadVector({name:m,size:u,array:i})}else e.loadVector({name:m,size:u,array:i})},n.readAsBinaryString(t),f(!1)}else"fbx"==a?K([t]):"glb"!==a&&"gltf"!==a||X([t])})),void J([])))};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(y.a,{expand:"md",className:"navbar navbar-dark"},r.a.createElement(g.a,{href:"#"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("div",{className:"logo"}))),r.a.createElement(v.a,{onClick:function(){return o(!i)}}),r.a.createElement(w.a,{isOpen:i,navbar:!0},r.a.createElement(E.a,{className:"mr-auto",navbar:!0},r.a.createElement(O.a,{nav:!0,inNavbar:!0},r.a.createElement(k.a,{nav:!0,caret:!0},"File"),r.a.createElement(N.a,{right:!0},r.a.createElement(j.a,{onClick:V},r.a.createElement("span",null,"Import ")),r.a.createElement(j.a,{divider:!0}))),r.a.createElement(S.a,null,r.a.createElement(x.a,{disabled:z,onClick:function(){z||(C(!z),Y(!0),e.loadDemo(e,$,Y).then((function(e){return Y(!1)})).catch((function(e){return Y(!1)})))}},"Load Demo")),r.a.createElement(S.a,null,r.a.createElement(x.a,null,r.a.createElement("a",{href:"https://youtube.com",target:"_blank"},"Youtube Video")))),r.a.createElement(M.a,null,r.a.createElement(x.a,{href:"https://github.com/prieston/mergin_mode",target:"_blank"},r.a.createElement("i",{className:"fab fa-github"}),r.a.createElement("span",null,"GitHub")))))),r.a.createElement("main",null,r.a.createElement(R.a,{split:"vertical",minSize:50,maxSize:-50,defaultSize:"40%",onChange:U.onWindowResize},r.a.createElement(ne,null),r.a.createElement(R.a,{split:"horizontal",minSize:50,maxSize:-50,defaultSize:"60%",onChange:U.onWindowResize},r.a.createElement("div",{id:"three-map"},r.a.createElement("div",{id:"axes-helper"}),r.a.createElement("div",{id:"info-helper"},r.a.createElement("div",{id:"epsg"},"EPSG: 32634"),r.a.createElement("div",{id:"coords"}))),null!==e.section&&("models"===(Z=e.section)?r.a.createElement(oe,null):"background"===Z?r.a.createElement(ce,null):"background-color"===Z?r.a.createElement(ue,{type:"background"}):"background-image"===Z?r.a.createElement(me,{type:"background"}):"ground-color"===Z?r.a.createElement(ue,{type:"ground"}):"ground-image"===Z?r.a.createElement(me,{type:"ground"}):"ground-vertices"===Z?r.a.createElement(le,null):r.a.createElement("span",null))||r.a.createElement("span",null)))),r.a.createElement("div",{style:{visibility:T?"visible":"hidden"},className:"loading-demo"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("i",{class:"fas fa-cog"})),r.a.createElement("div",null,"Loading Demo..."),r.a.createElement("div",null,"This might take a few minutes depending on your internet connection."),r.a.createElement("div",null,"Meanwhile you can view a youtube demo by clicking the link below"),r.a.createElement("div",null,r.a.createElement("a",{href:"https://youtube.com",target:"_blank"},"Youtube Video")))),r.a.createElement(I.a,{isOpen:u,onRequestClose:function(){return f(!u)}},r.a.createElement("div",{className:"container form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement(p,{onChange:function(e){J(Object(c.a)(e.target.files))}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("button",{className:"btn btn-primary form-control",onClick:$},"Load")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("button",{className:"btn btn-secondary form-control",onClick:V},"Close"))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=a(39),be=a(204),he=a(205);window.mergin_mode={modelLayer:[],vectors:[],plane:{},sky:{},mixers:[]};var ye={layers:{checked:["background-color","background-image","ground-grid","ground-color"],tree:[{key:"models",title:"Models",checkable:!1,selectable:!0,icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-folder"})),children:[]},{key:"scene",title:"Scene",checkable:!1,selectable:!1,icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-folder"})),children:[{key:"background",title:"Background",checkable:!1,icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-folder"})),children:[{key:"background-color",title:"Color",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"fas fa-palette"}))},{key:"background-image",title:"Image",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-file-image"}))},{key:"background-video",title:"Video",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-file-video"}))}]},{key:"ground",title:"Ground",checkable:!1,icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-folder"})),selectable:!1,children:[{key:"ground-color",title:"Color",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"fas fa-palette"}))},{key:"ground-image",title:"Image",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-file-image"}))},{key:"ground-vertices",title:"Vertices",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"fas fa-mountain"}))},{key:"ground-grid",title:"Grid",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"fab fa-slack-hash"}))}]},{key:"vector-layers",title:"Vector Layers",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-folder"})),checkable:!1,selectable:!1,children:[]},{key:"model-layers",title:"Model Layers",icon:r.a.createElement("span",{className:"layer-icon"},r.a.createElement("i",{className:"far fa-folder"})),checkable:!1,selectable:!1,children:[]}]}]},scene:{},plane:{id:null,mesh:{},dem:[],coords:{min:{x:-50,y:-50,z:0},max:{x:50,y:50,z:0}},color:"#222",gridHelper:{}},sky:{id:null,mesh:{}},background:{color:"#000"},models:{data:[]},vectors:{data:[]},modelLayer:[],section:{active:null,title:null}},ge={models:"Models"},ve=Object(fe.c)({api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_MODEL":return Object.assign({},e,{models:Object.assign({},e.models,{data:[].concat(Object(c.a)(e.models.data),[{id:t.id,mesh:t.model.object,name:t.model.name,size:t.model.size}])})});case"LOAD_VECTOR":var a=Object.assign({},e,{vectors:Object.assign({},e.vectors,{data:[].concat(Object(c.a)(e.vectors.data),[{id:t.id,array:t.vector.array,name:t.vector.name,size:t.vector.size}])})});return window.mergin_mode.vectors=a.vectors,a;case"CHANGE_SECTION":return Object.assign({},e,{section:Object.assign({},e.section,{active:t.section,title:ge[t.section]||null})});case"SET_KEYS":return Object.assign({},e,{keys:t.keys});case"SET_SCENE":return Object.assign({},e,{scene:t.scene});case"SET_PLANE":var n=Object.assign({},e,{plane:Object(l.a)({},e.plane,{},t.plane)});return window.mergin_mode.plane=n.plane,n;case"SET_SKY":var r=Object.assign({},e,{sky:Object(l.a)({},e.sky,{},t.sky)});return window.mergin_mode.sky=r.sky,r;case"SET_LAYERS":return Object.assign({},e,{layers:{tree:Object(c.a)(t.layers.tree),checked:Object(c.a)(t.layers.checked)}});case"SET_BACKGROUND_COLOR":return Object.assign({},e,{background:{color:t.color}});case"SET_GROUND_COLOR":return Object.assign({},e,{plane:Object(l.a)({},e.plane,{color:t.color})});case"SET_MODEL_LAYER":var i=Object.assign({},e,{modelLayer:[].concat(Object(c.a)(e.modelLayer),[t.layer])});return window.mergin_mode.modelLayer=i.modelLayer,i;case"SET_MODEL_RUNTIME_INFO":var o=Object.assign({},e,{modelLayer:Object(c.a)(e.modelLayer.map((function(e){return e.id==t.modelId&&(e.runtimeInfo=t.runtimeInfo),e})))});return window.mergin_mode.modelLayer=o.modelLayer,o;default:return e}}}),we=document.getElementById("root"),Ee=Object(be.createLogger)({}),Oe=Object(fe.d)(ve,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(fe.a)(he.a,Ee));o.a.render(r.a.createElement(d.a,{store:Oe},r.a.createElement(pe,null)),we),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[209,1,2]]]);
//# sourceMappingURL=main.7c32ad9b.chunk.js.map