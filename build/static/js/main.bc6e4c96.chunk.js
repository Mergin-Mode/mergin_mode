(this.webpackJsonp3drw=this.webpackJsonp3drw||[]).push([[0],{179:function(e,t){},201:function(e,t,a){e.exports=a(453)},206:function(e,t,a){},208:function(e,t,a){},221:function(e,t,a){},428:function(e,t){},429:function(e,t){},430:function(e,t,a){},453:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(25),o=a.n(i),c=(a(206),a(207),a(24)),l=a(31),s=a(14),d=(a(208),a(23)),m=a(1),u=function(e,t,a,n){return{Xb:e+a*Math.sin(n/63.6619772367581),Yb:t+a*Math.cos(n/63.6619772367581)}},f=function(e,t,a,n){var r=Math.abs(a-e),i=Math.abs(n-t),o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));return Number(o.toFixed(4))},p=function(e,t,a,n){var r=Math.abs(a-e),i=Math.abs(n-t),o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),c=a-e,l=n-t,s=63.6619772367581*Math.atan(r/i);if(c>0&&l>0)var d=s;if(c>0&&l<0)d=200-s;if(c<0&&l<0)d=200+s;if(c<0&&l>0)d=400-s;if(0==c&&l>0)d=0;if(0==c&&l<0)d=200;if(c>0&&0==l)d=100;if(c<0&&0==l)d=300;if(0==c&&0==l)d=0;return{Gab:d.toFixed(4),Sab:o.toFixed(4)}},h=a(455),b=a(456),v=a(457),g=a(458),y=a(459),w=a(464),E=a(463),O=a(465),S=a(460),N=a(461),M=a(462),x=a(188),j=a(126),k=a(120),L=function(e,t,a){if(0==a.length)return 0;var n=(f(0,e,0,-50)/(100/99)).toFixed(4)-0,r=(f(0,t,0,50)/(100/99)).toFixed(4)-0,i=Math.floor(n),o=Math.floor(r),c=n-i,l=r-o;if(0==c&&0==l){var s=100*o+i;return Number(a[s][2].toFixed(4))}if(c<=1-l){s=100*o+i;if(console.log(s),!a[s]||!a[s+1])return 0;var d=a[s][2]-a[s+1][2],m=Math.sqrt(Math.pow(d/100-0,2)+Math.pow(100/99,2)),u=c+l,p=Math.sqrt(Math.pow(l*(100/99),2)+Math.pow(l*(100/99),2)),h=m*u,b=Math.atan(Math.abs((d/100-0)/(100/99))),v=h*Math.sin(b);if(d<0)var g=a[s][2]/100-0+v;else g=a[s][2]/100-0-v;if(!a[s]||!a[s+100])return 0;var y=a[s][2]-a[s+100][2],w=Math.sqrt(Math.pow(y/100-0,2)+Math.pow(100/99,2)),E=l+c,O=Math.sqrt(Math.pow(c*(100/99),2)+Math.pow(c*(100/99),2)),S=w*E,N=Math.atan(Math.abs((y/100-0)/(100/99))),M=S*Math.sin(N);if(y<0)var x=a[s][2]/100-0+M;else x=a[s][2]/100-0-M;var j=p/(O+p),k=Math.abs(g-x)*j;if(g-x<0)var L=g+k;else L=g-k}else{s=100*(o+1)+i+1;if(console.log(s),!a[s]||!a[s-1])return 0;d=a[s][2]-a[s-1][2],m=Math.sqrt(Math.pow(d/100-0,2)+Math.pow(100/99,2)),u=1-c+(1-l),p=Math.sqrt(Math.pow(100/99*(1-l),2)+Math.pow(100/99*(1-l),2)),h=m*u,b=Math.atan(Math.abs((d/100-0)/(100/99))),v=h*Math.sin(b);if(d<0)g=a[s][2]/100-0+v;else g=a[s][2]/100-0-v;if(!a[s]||!a[s-100])return 0;y=a[s][2]-a[s-100][2],w=Math.sqrt(Math.pow(y/100-0,2)+Math.pow(100/99,2)),E=1-l+(1-c),O=Math.sqrt(Math.pow(100/99*(1-c),2)+Math.pow(100/99*(1-c),2)),S=w*E,N=Math.atan(Math.abs((y/100-0)/(100/99))),M=S*Math.sin(N);if(y<0)x=a[s][2]/100-0+M;else x=a[s][2]/100-0-M;j=p/(O+p),k=Math.abs(g-x)*j;if(g-x<0)L=g+k;else L=g-k}return console.log(L),Number(L.toFixed(4))};function _(e,t,a,n,r,i,o,c,l,s){o.FBXLoader=j.a,o.GLTFLoader=k.a;var d=new m.j,p=new m.lb,h=new m.Eb,b=document.getElementById("three-map");(a=new m.nb).background=new m.k(0),(n=new m.Jb({antialias:!0})).setPixelRatio(window.devicePixelRatio),n.setSize(b.clientWidth,b.clientHeight),n.shadowMap.enabled=!0,document.getElementById("three-map").appendChild(n.domElement),(e=new m.bb(60,b.clientWidth/b.clientHeight,1,1e4)).position.set(80,80,80),e.up.set(0,0,1),(t=new x.a(e,n.domElement)).enableDamping=!0,t.dampingFactor=.05,t.screenSpacePanning=!1,t.minDistance=10,t.maxDistance=1e3,t.maxPolarAngle=Math.PI/2,function(e){for(var t=e.getAttribute("position"),a=t.array,n=2,r=0;n<a.length;n+=3,r++)a[n]=0;t.needsUpdate=!0,e.computeVertexNormals()}(E=new m.cb(100,100,99,99)),(O=new m.S({color:"#222",side:m.o})).flatShading=!0;var v=new m.P(E,O);v.position.set(0,0,0),v.castShadow=!0,v.receiveShadow=!0,a.add(v),(w=new m.m(16777215)).position.set(1,1,100),w.shadow={camera:{near:.5,far:300,left:-50,bottom:-50,right:50,top:50},bias:1e-4,mapSize:{x:6144,y:6144}},a.add(w);var g=new m.d(5);a.add(g),(w=new m.m(8840)).position.set(-0,-0,-100),a.add(w);var y=new m.n(w,5);a.add(y);var w=new m.a(6710886);a.add(w);var E=new m.ub(1,32,32),O=new m.Q({color:16711680});function S(){e.aspect=b.clientWidth/b.clientHeight,e.updateProjectionMatrix(),n.setSize(b.clientWidth,b.clientHeight)}return r=new m.P(E,O),a.add(r),function r(){requestAnimationFrame(r),t.update(),function(){for(var t=d.getDelta(),r=0;r<window.mergin_mode.mixers.length;++r)window.mergin_mode.mixers[r].update(t);window.mergin_mode.modelLayer.map((function(e){var a=e.mesh.position,n=a.x,r=a.y,i=a.z,o=e.runtimeInfo,c=o.animating,l=o.activeRow,d=window.mergin_mode.vectors.data.filter((function(t){return t.id==e.vectorId}))[0].array[0][l],p=d[0],h=d[1],b=(d[2],d[3]),v=d[4];if(c){var g=window.mergin_mode.plane.dem,y=function(e,t,a,n,r,i){var o=u(e,t,r,n),c=L(o.Xb,o.Yb,i);return{x:o.Xb,y:o.Yb,z:c}}(Number(n.toFixed(4)),Number(r.toFixed(4)),Number(i.toFixed(4)),b,t,g),w=y.x,E=y.y,O=y.z,S=f(p,h,n,r);if(S===1/0&&(S=0),S<v)e.mesh.position.set(w,E,O);else{var N=window.mergin_mode.vectors.data.filter((function(t){return t.id==e.vectorId}))[0].array[0][l+1];if(N){e.mesh.position.set(N[0],N[1],N[2]),s(e.id,{animating:!0,activeRow:l+1});var M=new m.Fb(0,0,1);e.mesh.rotateOnWorldAxis(M,-(400-d[3]+N[3])/63.6619772367581)}else{var x=window.mergin_mode.vectors.data.filter((function(t){return t.id==e.vectorId}))[0].array[0][0];e.mesh.position.set(x[0],x[1],x[2]),s(e.id,{animating:!0,activeRow:0})}}}})),n.render(a,e)}()}(),window.addEventListener("resize",S,!1),window.addEventListener("mousedown",(function(t){var a=document.getElementById("three-map").getBoundingClientRect(),n=a.left,i=a.top;h.x=(t.clientX-n)/b.clientWidth*2-1,h.y=-(t.clientY-i)/b.clientHeight*2+1,p.setFromCamera(h,e);var o=p.intersectObject(v);o.length>0&&(r.position.set(0,0,0),r.lookAt(o[0].face.normal),r.position.copy(o[0].point))}),!1),{camera:e,controls:t,scene:a,renderer:n,pointer:r,partials:{plane:v,pointer:r},loaders:o,onWindowResize:S}}k.a.prototype.load2=function(e,t){var a=this,n=e[0],r=new FileReader;r.onload=function(e){2!==e.target.readyState&&0!==e.target.status||a.parse(e.target.result||e.target.responseText,"",t)},r.readAsArrayBuffer(n)},j.a.prototype.load2=function(e,t){var a=this,n=e[0],r=new FileReader;r.onload=function(e){if(2===e.target.readyState||0===e.target.status){var n=a.parse(e.target.result||e.target.responseText);t&&t(n)}},r.readAsArrayBuffer(n)};var z=a(77),C=a(78),A=a.n(C),F=(a(220),a(221),a(199)),I=a(56),R=a(193),D=a(58),T=a(57),J=a(59),P=a(117),W=function(e){function t(e){var a;Object(I.a)(this,t),a=Object(D.a)(this,Object(T.a)(t).call(this,e));e.keys;return a.state={clicked:!1,color:"#000"},a}return Object(J.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return this.state.clicked?r.a.createElement(P.SketchPicker,null):r.a.createElement("div",{style:{backgroundColof:this.state.color,border:"3px solid whitesmoke",borderRadius:"4px",width:"16px",height:"16px",float:"right"}})}}]),t}(r.a.Component);W.defaultProps={};var B=function(e){return{type:"LOAD_MODEL",model:e,id:Date.now()}},q=function(e){return{type:"SET_PLANE",plane:e,id:Date.now()}},V=function(e){return{type:"CHANGE_SECTION",section:e}};var X=Object(d.b)((function(e){return{layers:e.api.layers}}),(function(e){return{changeSection:function(t){return e(V(t))}}}))((function(e){var t=e.keys,a=t,i=Object(n.useState)(e.layers),o=Object(s.a)(i,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){l(e.layers)}),[e.layers]),r.a.createElement("span",{className:"cus-label"},r.a.createElement("span",null,"operations: "),r.a.createElement("span",{style:{color:"blue"},onClick:function(){setTimeout((function(){}),0)}},"Edit"),"\xa0",r.a.createElement("label",{onClick:function(e){return e.stopPropagation()}},r.a.createElement("input",{type:"checkbox"})," checked"),"\xa0",r.a.createElement("span",{style:{color:"#EB0000"},onClick:function(e){window.confirm("sure to delete?")&&e.stopPropagation()}},"Delete")),r.a.createElement("div",{style:{margin:"0 20px"}},r.a.createElement(F.a,{className:"myCls",showLine:!0,checkable:!0,multiple:!1,checkStrictly:!0,selectable:!0,defaultExpandAll:!0,onExpand:function(e){console.log("onExpand",e)},defaultSelectedKeys:[],defaultCheckedKeys:a,onSelect:function(t,a){var n=a.node.title.toLowerCase();console.log("selected",t,a),e.changeSection(t.length?n:null)},onCheck:function(e,t){console.log("onCheck",e,t)},treeData:c}))})),G=a(194),H=a(122),Y=a(7),U=(a(430),a(123));var K=Object(d.b)((function(e){return{models:e.api.models,title:e.api.section.title,scene:e.api.scene,vectors:e.api.vectors.data}}),(function(e){return{loadModel:function(t){return e(B(t))},changeSection:function(t){return e(V(t))},setModelLayer:function(t){return e(function(e){return{type:"SET_MODEL_LAYER",layer:e}}(t))}}}))((function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),i=a[0],o=a[1],d=Object(n.useState)(JSON.stringify({})),u=Object(s.a)(d,2),f=u[0],p=u[1],h=Object(n.useState)(JSON.stringify({})),b=Object(s.a)(h,2),v=b[0],g=b[1],y=Object(n.useState)(JSON.stringify({})),w=Object(s.a)(y,2),E=w[0],O=w[1],S=Object(n.useState)({}),N=Object(s.a)(S,2),M=N[0],x=N[1];Object(n.useEffect)((function(){var t={},a={},n={},r={},c={};e.models.data.map((function(e){t[e.id]=f[e.id]||JSON.stringify({x:0,y:0,z:0}),a[e.id]=E[e.id]||JSON.stringify({x:0,y:0,z:0}),n[e.id]=v[e.id]||JSON.stringify({x:1,y:1,z:1}),r[e.id]=i[e.id]||"info",c[e.id]=M[e.id]||0})),p(t),O(a),g(n),o(r),x(c)}),[e.models.data]);var j=function(e,t,a,n){return e(Object(l.a)({},a,Object(Y.a)({},t,n)))};return r.a.createElement("div",{className:"ModelList container"},r.a.createElement("h3",null,e.title),r.a.createElement("div",{className:"row"},e.models.data.map((function(t){return r.a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"model-item"},"info"===i[t.id]?r.a.createElement("span",{className:"settings",onClick:function(){return j(o,t.id,i,"settings")}},r.a.createElement("i",{className:"fas fa-cog"})):r.a.createElement("span",{className:"settings",onClick:function(){return j(o,t.id,i,"info")}},r.a.createElement("i",{className:"fas fa-arrow-right"})),r.a.createElement("div",{className:"model-item-inner"},"info"===i[t.id]?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"id: ",t.id),r.a.createElement("div",null,"name: ",t.name),r.a.createElement("div",null,"size: ",(t.size/1e3/1e3).toFixed(2)," Mb"),r.a.createElement("button",{style:{width:"100%"},className:"btn btn-light",onClick:function(){var a=e.vectors.filter((function(e){return e.id==M[t.id]}))[0];if(a.name.includes("anime")){var n,r;if(t.name.includes("glb")||t.name.includes("gltf")){var i=function(e,t,a){var n=new m.c(e),r=m.b.findByName(t,a);if(r){n.clipAction(r).play()}return n}(r=U.a.clone(t.mesh.scene),t.mesh.animations,"Walk");window.mergin_mode.mixers.push(i)}else r=t.mesh.clone();var o=JSON.parse(E[t.id]);o.x=Number(o.x),o.y=Number(o.y),o.z=Number(o.z);var l=JSON.parse(v[t.id]);l.x=Number(l.x),l.y=Number(l.y),l.z=Number(l.z);var s=new m.Fb(1,0,0),d=new m.Fb(0,1,0),u=new m.Fb(0,0,1);return r.rotateOnWorldAxis(s,o.x),r.rotateOnWorldAxis(d,o.y),r.rotateOnWorldAxis(u,-a.array[0][0][3]/63.6619772367581),r.scale.set(l.x,l.y,l.z),(n=r.position).set.apply(n,Object(c.a)(a.array[0][0])),r.castShadow=!0,r.receiveShadow=!0,e.scene.add(r),e.setModelLayer({id:Date.now(),vectorId:a.id,runtimeInfo:{animating:!0,activeRow:0},mesh:r}),!1}a.array[0].map((function(a){var n,r;r=t.name.includes("glb")||t.name.includes("gltf")?U.a.clone(t.mesh.scene):t.mesh.clone();var i=JSON.parse(E[t.id]);i.x=Number(i.x),i.y=Number(i.y),i.z=Number(i.z);var o=new m.Fb(1,0,0),l=new m.Fb(0,1,0),s=new m.Fb(0,0,1);r.rotateOnWorldAxis(o,i.x),r.rotateOnWorldAxis(l,i.y),r.rotateOnWorldAxis(s,i.z);var d=JSON.parse(v[t.id]);d.x=Number(d.x),d.y=Number(d.y),d.z=Number(d.z),r.scale.set(d.x,d.y,d.z),(n=r.position).set.apply(n,Object(c.a)(a)),r.castShadow=!0,r.receiveShadow=!0,e.scene.add(r)}))}},"Add To Scene")):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Rotation"),r.a.createElement("input",{onChange:function(e){return j(O,t.id,E,e.target.value)},value:E[t.id]}),r.a.createElement("label",null,"Scale"),r.a.createElement("input",{onChange:function(e){return j(g,t.id,v,e.target.value)},value:v[t.id]}),r.a.createElement("label",null,"Position"),r.a.createElement("select",{onChange:function(e){j(x,t.id,M,e.target.value)}},r.a.createElement("option",{value:0,selected:0==M[t.id]},"Select"),e.vectors.map((function(e){return r.a.createElement("option",{value:e.id,selected:M[t.id]==e.id},e.name)})))))))}))))}));var Q=Object(d.b)((function(e){return{models:e.api.models,title:e.api.section.title,scene:e.api.scene,vectors:e.api.vectors.data,plane:e.api.plane.mesh}}),(function(e){return{setPlane:function(t){return e(q({dem:t}))}}}))((function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),i=a[0];return a[1],r.a.createElement("div",{className:"ModelList container"},r.a.createElement("h3",null,e.title),r.a.createElement("select",{onChange:function(t){var a,n=e.vectors.filter((function(e){return e.id==t.target.value}))[0].array[0],r=e.plane.geometry.attributes.position.array;a=0;for(var i=0;i<1e4;i++)a++,a++,r[a++]=0==i?200:.01*((n[i]||[])[2]||0);e.plane.geometry.attributes.position.needsUpdate=!0;var o=new m.zb;o.crossOrigin="",o.load("../assets/ground-texture.png",(function(t){var a=new m.Q({map:t});e.plane.material=a,e.plane.material.needsUpdate=!0}),(function(){}),(function(e){console.log(e)})),e.setPlane(n)}},r.a.createElement("option",{value:0,selected:0==i},"Select"),e.vectors.map((function(e){return r.a.createElement("option",{value:e.id,selected:i==e.id},e.name)}))))}));A.a.setAppElement("#root");var $=Object(d.b)((function(e){return{section:e.api.section.active,title:e.api.section.title,layers:e.api.layers,vectors:e.api.vectors,modelLayer:e.api.modelLayer}}),(function(e){return{loadModel:function(t){return e(B(t))},loadVector:function(t){return e(function(e){return{type:"LOAD_VECTOR",vector:e,id:Date.now()}}(t))},changeSection:function(t){return e(V(t))},setScene:function(t){return e(function(e){return{type:"SET_SCENE",scene:e,id:Date.now()}}(t))},setPlane:function(t){return e(q(t))},setLayers:function(t){return e(function(e){return{type:"SET_LAYERS",layers:e}}(t))},setModelRuntimeInfo:function(t,a){return e(function(e,t){return{type:"SET_MODEL_RUNTIME_INFO",modelId:e,runtimeInfo:Object(l.a)({},t)}}(t,a))}}}))((function(e){var t,a=Object(n.useState)(!1),i=Object(s.a)(a,2),o=i[0],d=i[1],m=Object(n.useState)(!1),u=Object(s.a)(m,2),f=u[0],x=u[1],j=Object(n.useState)([]),k=Object(s.a)(j,2),L=k[0],C=k[1],F=Object(n.useState)({mixers:[],camera:{},controls:{},scene:{},renderer:{},pointer:{},partials:{},loaders:{},onWindowResize:function(){}}),I=Object(s.a)(F,2),R=I[0],D=I[1],T=function(){return x(!f)};return Object(n.useEffect)((function(){R.mixers;var t=R.camera,a=R.controls,n=R.scene,r=R.renderer,i=R.pointer,o=(R.partials,R.loaders),c=(document.getElementById("three-map"),_(t,a,n,r,i,0,o,0,0,e.setModelRuntimeInfo));e.setScene(c.scene),e.setPlane({id:Date.now(),mesh:c.partials.plane}),D(Object(l.a)({},c))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(h.a,{expand:"md",className:"navbar navbar-dark"},r.a.createElement(b.a,{href:"/"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("div",{className:"logo"}),"Mergin' Mode")),r.a.createElement(v.a,{onClick:function(){return d(!o)}}),r.a.createElement(g.a,{isOpen:o,navbar:!0},r.a.createElement(y.a,{className:"mr-auto",navbar:!0},r.a.createElement(w.a,{nav:!0,inNavbar:!0},r.a.createElement(E.a,{nav:!0,caret:!0},"File"),r.a.createElement(O.a,{right:!0},r.a.createElement(S.a,{onClick:T},r.a.createElement("span",null,"Import ")),r.a.createElement(S.a,{divider:!0})))),r.a.createElement(N.a,null,r.a.createElement(M.a,{href:"https://github.com/prieston/mergin_mode",target:"_blank"},r.a.createElement("i",{class:"fab fa-github"}),r.a.createElement("span",null,"GitHub")))))),r.a.createElement("main",null,r.a.createElement(z.a,{split:"vertical",minSize:50,maxSize:-50,defaultSize:"40%",onChange:R.onWindowResize},r.a.createElement(X,null),r.a.createElement(z.a,{split:"horizontal",minSize:50,maxSize:-50,defaultSize:"60%",onChange:R.onWindowResize},r.a.createElement("div",{id:"three-map"}),null!==e.section&&("models"===(t=e.section)?r.a.createElement(K,null):"vertices"===t?r.a.createElement(Q,null):r.a.createElement("span",null))))),r.a.createElement(A.a,{isOpen:f,onRequestClose:function(){return x(!f)}},r.a.createElement("div",{className:"container form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("input",{className:"form-control",type:"file",onChange:function(e){C(Object(c.a)(e.target.files))}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("button",{className:"btn btn-primary form-control",onClick:function(){var t=L[0].name.split(".")[L[0].name.split(".").length-1],a=["xlsx","xls","ods","csv","xyz"];if(a.indexOf(t)>-1){var n=new FileReader,r=[];n.onload=function(t){var a=t.target.result,n=H.read(a,{type:"binary"}),i=n.SheetNames[0],o=n.Sheets[i],c=H.utils.sheet_to_csv(o,{header:1});r.push(c.split("\n").map((function(e){return e.split(",").filter((function(e){return e.length>0})).map((function(e){return Number(e)}))})));var l=L[0],s=l.name,d=l.size,m=JSON.parse(JSON.stringify(e.layers));if(m[1].children[2].children.push({key:"1-2-".concat(m[1].children[2].children.length),title:s,checkable:!1,selectable:!1}),e.setLayers(m),s.includes("anime")){for(var u=0;u<r[0].length-1;u++){var f=r[0][u][0],h=r[0][u][1],b=(r[0][u+1]||[])[0]||0,v=(r[0][u+1]||[])[1]||0,g=p(f,h,b,v),y=g.Gab,w=g.Sab;r[0][u][3]=Number(y),r[0][u][4]=Number(w)}e.loadVector({name:s,size:d,array:r})}else e.loadVector({name:s,size:d,array:r})},n.readAsBinaryString(L[0]),x(!f)}else"fbx"==t?function(t){var a=t[0],n=a.name,r=a.size;R.scene;(new R.loaders.FBXLoader).load2(t,(function(t){console.log(t.animations),t.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.loadModel({name:n,size:r,object:t}),x(!f);var a=JSON.parse(JSON.stringify(e.layers));a[0].children.push({key:"0-".concat(a[0].children.length),title:n,checkable:!1,selectable:!1}),e.setLayers(a)}))}(L):"glb"!==t&&"gltf"!==t||function(t){var a=t[0],n=a.name,r=a.size,i=(R.scene,new R.loaders.GLTFLoader),o=new G.a;i.setDRACOLoader(o),i.load2(t,(function(t){t.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),e.loadModel({name:n,size:r,object:t}),x(!f);var a=JSON.parse(JSON.stringify(e.layers));a[0].children.push({key:"0-".concat(a[0].children.length),title:n,checkable:!1,selectable:!1}),e.setLayers(a)}))}(L);console.log(a)}},"Load")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("button",{className:"btn btn-secondary form-control",onClick:T},"Close"))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(39),ee=a(197),te=a(198);window.mergin_mode={modelLayer:[],vectors:[],plane:{},mixers:[]};var ae={layers:[{key:"0",title:"Models",checkable:!1,selectable:!0,children:[]},{key:"1",title:"Scene",checkable:!1,selectable:!1,children:[{key:"1-0",title:"Background",checkable:!1,selectable:!1,children:[{key:"1-0-0",title:"Color"},{key:"1-0-1",title:"Image"},{key:"1-0-2",title:"Video"}]},{key:"1-1",title:"Ground",checkable:!1,selectable:!1,children:[{key:"1-1-0",title:"Color"},{key:"1-1-1",title:"Image"},{key:"1-1-2",title:"Vertices"}]},{key:"1-2",title:"Vector Layers",checkable:!1,selectable:!1,children:[]},{key:"1-3",title:"Model Layers",checkable:!1,selectable:!1,children:[]}]}],scene:{},plane:{id:null,mesh:{},dem:[]},models:{data:[]},vectors:{data:[]},modelLayer:[],section:{active:null,title:null}},ne={models:"Models"},re=Object(Z.c)({api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_MODEL":return Object.assign({},e,{models:Object.assign({},e.models,{data:[].concat(Object(c.a)(e.models.data),[{id:t.id,mesh:t.model.object,name:t.model.name,size:t.model.size}])})});case"LOAD_VECTOR":var a=Object.assign({},e,{vectors:Object.assign({},e.vectors,{data:[].concat(Object(c.a)(e.vectors.data),[{id:t.id,array:t.vector.array,name:t.vector.name,size:t.vector.size}])})});return window.mergin_mode.vectors=a.vectors,a;case"CHANGE_SECTION":return Object.assign({},e,{section:Object.assign({},e.section,{active:t.section,title:ne[t.section]||null})});case"SET_SCENE":return Object.assign({},e,{scene:t.scene});case"SET_PLANE":var n=Object.assign({},e,{plane:Object(l.a)({},e.plane,{},t.plane)});return window.mergin_mode.plane=n.plane,n;case"SET_LAYERS":return Object.assign({},e,{layers:t.layers});case"SET_MODEL_LAYER":var r=Object.assign({},e,{modelLayer:[].concat(Object(c.a)(e.modelLayer),[t.layer])});return window.mergin_mode.modelLayer=r.modelLayer,r;case"SET_MODEL_RUNTIME_INFO":var i=Object.assign({},e,{modelLayer:Object(c.a)(e.modelLayer.map((function(e){return console.log(e.id,t.modelId),e.id==t.modelId&&(e.runtimeInfo=t.runtimeInfo),e})))});return window.mergin_mode.modelLayer=i.modelLayer,i;default:return e}}}),ie=document.getElementById("root"),oe=Object(ee.createLogger)({}),ce=Object(Z.d)(re,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(Z.a)(te.a,oe));o.a.render(r.a.createElement(d.a,{store:ce},r.a.createElement($,null)),ie),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[201,1,2]]]);
//# sourceMappingURL=main.bc6e4c96.chunk.js.map